"use strict";

var openItem = function openItem(item) {
  var container = item.closest('.team__item');
  var contentBlock = container.find('.team__content');
  var textBlock = contentBlock.find('.team__content-block');
  var reqHeight = textBlock.height();
  container.addClass('active');
  contentBlock.height(reqHeight);
};
var closeEveryItem = function closeEveryItem(container) {
  var items = container.find('.team__content');
  var itemContianer = container.find('.team__item');
  itemContianer.removeClass('active');
  items.height(0);
};
$('.team__name').click(function (e) {
  var $this = $(e.currentTarget);
  var container = $this.closest('.team');
  var elemContainer = $this.closest('.team__item');
  if (elemContainer.hasClass('active')) {
    closeEveryItem(container);
  } else {
    closeEveryItem(container);
    openItem($this);
  }
});
var mesureWidth = function mesureWidth(item) {
  var reqItemWidth = 0;
  var screenWidth = $(window).width();
  var container = item.closest('.colors-menu');
  var buttonsBlocks = container.find('.colors-menu__button');
  var titlesWidth = buttonsBlocks.width() * buttonsBlocks.length;
  var textContainer = item.find('.colors-menu__container');
  var paddingLeft = parseInt(textContainer.css('padding-left'));
  var paddingRight = parseInt(textContainer.css('padding-right'));
  var isMobile = window.matchMedia('(max-width: 768px)').matches;
  if (isMobile) {
    reqItemWidth = screenWidth - titlesWidth;
  } else {
    reqItemWidth = 500;
  }
  return {
    container: reqItemWidth,
    textContainer: reqItemWidth - paddingLeft - paddingRight
  };
};
var closeEveryItemInContainer = function closeEveryItemInContainer(container) {
  var item = container.find('.colors-menu__item');
  var content = container.find('.colors-menu__content');
  item.removeClass('active-colors');
  content.width(0);
};
var openItemColors = function openItemColors(item) {
  var hiddenContent = item.find('.colors-menu__content');
  var reqWidth = mesureWidth(item);
  var textBlock = item.find('.colors-menu__container');
  item.addClass('active-colors');
  hiddenContent.width(reqWidth.container);
  textBlock.width(reqWidth.textContainer);
};
$('.colors-menu__button').on('click', function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var item = $this.closest('.colors-menu__item');
  var itemOpened = item.hasClass('active-colors');
  var container = $this.closest('.colors-menu');
  if (itemOpened) {
    closeEveryItemInContainer(container);
  } else {
    closeEveryItemInContainer(container);
    openItemColors(item);
  }
});
var gearOne = document.querySelector('#gear__button-one');
var gearTwo = document.querySelector('#gear__button-two');
var gearRotationOne = document.querySelector('#gear-image-one');
var gearRotationTwo = document.querySelector('#gear-image-two');
var gearDropdownOne = document.querySelector('#gear__dropdown-one');
var gearDropdownTwo = document.querySelector('#gear__dropdown-two');
function clickGear() {
  gearRotationOne.classList.toggle('gear-image--rotation');
  gearRotationTwo.classList.toggle('gear-image--rotation');
  gearDropdownOne.classList.toggle('gear__dropdown--active');
  gearDropdownTwo.classList.toggle('gear__dropdown--active');
}
gearOne.addEventListener('click', clickGear);
gearTwo.addEventListener('click', clickGear);
var hamburger = document.querySelector('#hamburger');
var overlay = document.querySelector('#overlay');
var body = document.querySelector('body');
var links = document.querySelectorAll('.overlay-menu__link');
links.forEach(function (e) {
  e.addEventListener('click', activeMenu);
});
function activeMenu() {
  hamburger.classList.toggle('hamburger--active');
  overlay.classList.toggle('overlay--active');
  body.classList.toggle('body--active-menu');
}
hamburger.addEventListener('click', activeMenu);
var myMap;
var init = function init() {
  myMap = new ymaps.Map("map", {
    center: [55.755461, 37.619228],
    zoom: 14,
    controls: []
  });
  var coords = [[55.758403, 37.583561], [55.756452, 37.620574], [55.750201, 37.603602], [55.743937, 37.581041]];
  var myCollection = new ymaps.GeoObjectCollection({}, {
    draggable: false,
    iconLayout: 'default#image',
    iconImageHref: 'IMG/marker.svg',
    iconImageSize: [30, 42],
    iconImageOffset: [-3, -42]
  });
  coords.forEach(function (coord) {
    myCollection.add(new ymaps.Placemark(coord));
  });
  myMap.geoObjects.add(myCollection);
  myMap.behaviors.disable('scrollZoom');
};
ymaps.ready(init);
var validateFields = function validateFields(form, fieldsArray) {
  fieldsArray.forEach(function (fieled) {
    fieled.removeClass("input-error");
    if (fieled.val().trim() == "") {
      fieled.addClass("input-error");
    }
  });
  var errorFields = form.find(".input-error");
  return errorFields.length == 0;
};
$('.form').submit(function (e) {
  e.preventDefault();
  var form = $(e.currentTarget);
  var name = form.find("[name='name']");
  var phone = form.find("[name='phone']");
  var comment = form.find("[name='comment']");
  var to = form.find("[name='to']");
  var modal = $("#modal");
  var content = modal.find('.modal__content');
  var isValid = validateFields(form, [name, phone, comment, to]);
  if (isValid) {
    $.ajax({
      url: "https://webdev-api.loftschool.com/sendmail",
      method: "POST",
      data: {
        name: name.val(),
        phone: phone.val(),
        comment: comment.val(),
        to: to.val()
      },
      success: function success(data) {
        content.text(data.message);
        $('.form')[0].reset();
        $.fancybox.open({
          src: "#modal",
          type: "inline"
        });
      },
      error: function error(data) {
        if (data) {
          content.text("Ошибка сервера");
          $.fancybox.open({
            src: "#modal",
            type: "inline"
          });
        }
      }
    });
  }
});
$(".app-submit-button").click(function (e) {
  e.preventDefault();
  $.fancybox.close();
});
var sections = $('section');
var display = $('.maincontent');
var mobileDetect = new MobileDetect(window.navigator.userAgent);
var isMobile = mobileDetect.mobile();
var inScroll = false;
sections.first().addClass('this-section');
var perfomTransition = function perfomTransition(sectionEq) {
  if (inScroll == false) {
    inScroll = true;
    var position = sectionEq * -100;
    var currentSection = sections.eq(sectionEq);
    var menuTheme = currentSection.attr('data-theme');
    var sideMenu = $('.fixed-menu');
    if (menuTheme == 'white') {
      sideMenu.addClass('fixed-menu--white');
    } else {
      sideMenu.removeClass('fixed-menu--white');
    }
    display.css({
      transform: "translateY(".concat(position, "%)")
    });
    sections.eq(sectionEq).addClass('this-section').siblings().removeClass('this-section');
    setTimeout(function () {
      inScroll = false;
      sideMenu.find('.fixed-menu__item').eq(sectionEq).addClass('fixed-menu__item--active').siblings().removeClass('fixed-menu__item--active');
    }, 1300);
  }
};
var scrollViewport = function scrollViewport(direction) {
  var activeSection = sections.filter('.this-section');
  var nextSection = activeSection.next();
  var prevSection = activeSection.prev();
  if (direction == 'next' && nextSection.length) {
    perfomTransition(nextSection.index());
  }
  if (direction == 'prev' && prevSection.length) {
    perfomTransition(prevSection.index());
  }
};
$(window).on('wheel', function (e) {
  var deltaY = e.originalEvent.deltaY;
  if (deltaY > 0) {
    scrollViewport('next');
  }
  if (deltaY < 0) {
    scrollViewport('prev');
  }
});
$(window).on('keydown', function (e) {
  var tagName = e.target.tagName.toLowerCase();
  if (tagName != 'input' && tagName != 'textarea') {
    switch (e.keyCode) {
      case 38:
        scrollViewport('prev');
        break;
      case 40:
        scrollViewport('next');
        break;
    }
  }
});
$('.wrapper').on('touchmove', function (e) {
  return e.preventDefault();
});
$('[data-scroll-to').click(function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var target = $this.attr('data-scroll-to');
  var reqSection = $("[data-section=".concat(target, "]"));
  perfomTransition(reqSection.index());
});
if (isMobile) {
  $("body").swipe({
    swipe: function swipe(event, direction) {
      var scroller = viewportScroller();
      var scrollDirection = "";
      if (direction == 'up') scrollDirection = 'next';
      if (direction == 'down') scrollDirection = 'prev';
      scroller[scrollDirection]();
    }
  });
}
var player;
var playerContainer = $('.player');
var muteControler = $('.player__sound');
var eventsinit = function eventsinit() {
  $('.player__duration-play, .player__duration-pause').click(function (e) {
    e.preventDefault();
    if (playerContainer.hasClass('player--paused')) {
      player.pauseVideo();
    } else {
      player.playVideo();
    }
  });
  $('.player__sound-off, .player__sound-on').click(function (e) {
    e.preventDefault();
    if (muteControler.hasClass('player__sound--no-mute')) {
      muteControler.removeClass('player__sound--no-mute');
      player.mute();
    } else {
      muteControler.addClass('player__sound--no-mute');
      player.unMute();
    }
  });
  $('.player__playback').click(function (e) {
    var bar = $(e.currentTarget);
    var clickedPosition = e.originalEvent.layerX;
    var newButtonPositionPercent = clickedPosition / bar.width() * 100;
    var newPlaybackPositionSec = player.getDuration() / 100 * newButtonPositionPercent;
    $('.player__button-playback').css({
      left: "".concat(newButtonPositionPercent, "%")
    });
    player.seekTo(newPlaybackPositionSec);
  });
  $('.player__splash, .player__play-image').click(function (e) {
    player.playVideo();
  });
  $('.player__valume').click(function (e) {
    var valume = $(e.currentTarget);
    var clickedPositionValume = e.originalEvent.layerX;
    var buttonPositionValume = clickedPositionValume / valume.width() * 100;
    $('.player__button-valume').css({
      left: "".concat(buttonPositionValume, "%")
    });
    player.setVolume(buttonPositionValume);
    console.log(buttonPositionValume);
  });
};
var onPlayerReady = function onPlayerReady() {
  var interval;
  var duratinSec = player.getDuration();
  if (typeof interval != 'undefined') {
    clearInterval(interval);
  }
  interval = setInterval(function () {
    var completedSec = player.getCurrentTime();
    var completedPercent = completedSec / duratinSec * 100;
    $('.player__button-playback').css({
      left: "".concat(completedPercent, "%")
    });
  }, 1000);
};
var onPlayerStateChange = function onPlayerStateChange(event) {
  switch (event.data) {
    case 1:
      playerContainer.addClass('player--active');
      playerContainer.addClass('player--paused');
      break;
    case 2:
      playerContainer.removeClass('player--active');
      playerContainer.removeClass('player--paused');
      break;
  }
};
function onYouTubeIframeAPIReady() {
  player = new YT.Player('youtube-player', {
    height: '390',
    width: '662',
    videoId: 'sDh_kFP-ppk',
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    },
    playerVars: {
      controls: 0,
      disablekb: 0,
      showinfo: 0,
      rel: 0,
      autoplay: 0,
      modestbranding: 0
    }
  });
}
eventsinit();
var findBlockByAlias = function findBlockByAlias(alias) {
  return $('.reviews__item').filter(function (ndx, item) {
    return $(item).attr('data-linked') == alias;
  });
};
$('.interactive-avatar__link').click(function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var target = $this.attr('data-open');
  var itemToShow = findBlockByAlias(target);
  var curItem = $this.closest('.reviews__swither-item');
  itemToShow.addClass('reviews__item--active').siblings().removeClass('reviews__item--active');
  curItem.addClass('interactive-avatar--active').siblings().removeClass('interactive-avatar--active');
});
var slides = document.querySelector('.slider__slides');
var arrow = document.querySelector('.slider__buttons');
var currentNdx = 0;
var slider = function slider(event) {
  var target = event.target;
  if (target.classList.contains('slider__button')) {
    var targetValue = target.dataset.button;
    if (targetValue === 'right') {
      if (currentNdx < slides.children.length - 1) {
        currentNdx += 1;
        doTransition(currentNdx);
      } else return;
    }
    if (targetValue === 'left') {
      if (currentNdx > 0) {
        currentNdx -= 1;
        doTransition(currentNdx);
      } else return;
    }
  }
};
function doTransition(index) {
  slides.style.transform = "translateX(-".concat(index * 100, "%)");
}
arrow.addEventListener('click', slider);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGVvbi5qcyIsImNvbG9ycy1tZW51LmpzIiwiZ2Vhci5qcyIsImhhbWJ1cmdlci5qcyIsIm1hcC5qcyIsIm1vZGFsLmpzIiwib3BzLmpzIiwicGxheWVyLmpzIiwicmV2aWV3cy5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJvcGVuSXRlbSIsIml0ZW0iLCJjb250YWluZXIiLCJjbG9zZXN0IiwiY29udGVudEJsb2NrIiwiZmluZCIsInRleHRCbG9jayIsInJlcUhlaWdodCIsImhlaWdodCIsImFkZENsYXNzIiwiY2xvc2VFdmVyeUl0ZW0iLCJpdGVtcyIsIml0ZW1Db250aWFuZXIiLCJyZW1vdmVDbGFzcyIsIiQiLCJjbGljayIsImUiLCIkdGhpcyIsImN1cnJlbnRUYXJnZXQiLCJlbGVtQ29udGFpbmVyIiwiaGFzQ2xhc3MiLCJtZXN1cmVXaWR0aCIsInJlcUl0ZW1XaWR0aCIsInNjcmVlbldpZHRoIiwid2luZG93Iiwid2lkdGgiLCJidXR0b25zQmxvY2tzIiwidGl0bGVzV2lkdGgiLCJsZW5ndGgiLCJ0ZXh0Q29udGFpbmVyIiwicGFkZGluZ0xlZnQiLCJwYXJzZUludCIsImNzcyIsInBhZGRpbmdSaWdodCIsImlzTW9iaWxlIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJjbG9zZUV2ZXJ5SXRlbUluQ29udGFpbmVyIiwiY29udGVudCIsIm9wZW5JdGVtQ29sb3JzIiwiaGlkZGVuQ29udGVudCIsInJlcVdpZHRoIiwib24iLCJwcmV2ZW50RGVmYXVsdCIsIml0ZW1PcGVuZWQiLCJnZWFyT25lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2VhclR3byIsImdlYXJSb3RhdGlvbk9uZSIsImdlYXJSb3RhdGlvblR3byIsImdlYXJEcm9wZG93bk9uZSIsImdlYXJEcm9wZG93blR3byIsImNsaWNrR2VhciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW1idXJnZXIiLCJvdmVybGF5IiwiYm9keSIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhY3RpdmVNZW51IiwibXlNYXAiLCJpbml0IiwieW1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiY29udHJvbHMiLCJjb29yZHMiLCJteUNvbGxlY3Rpb24iLCJHZW9PYmplY3RDb2xsZWN0aW9uIiwiZHJhZ2dhYmxlIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0IiwiY29vcmQiLCJhZGQiLCJQbGFjZW1hcmsiLCJnZW9PYmplY3RzIiwiYmVoYXZpb3JzIiwiZGlzYWJsZSIsInJlYWR5IiwidmFsaWRhdGVGaWVsZHMiLCJmb3JtIiwiZmllbGRzQXJyYXkiLCJmaWVsZWQiLCJ2YWwiLCJ0cmltIiwiZXJyb3JGaWVsZHMiLCJzdWJtaXQiLCJuYW1lIiwicGhvbmUiLCJjb21tZW50IiwidG8iLCJtb2RhbCIsImlzVmFsaWQiLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZGF0YSIsInN1Y2Nlc3MiLCJ0ZXh0IiwibWVzc2FnZSIsInJlc2V0IiwiZmFuY3lib3giLCJvcGVuIiwic3JjIiwidHlwZSIsImVycm9yIiwiY2xvc2UiLCJzZWN0aW9ucyIsImRpc3BsYXkiLCJtb2JpbGVEZXRlY3QiLCJNb2JpbGVEZXRlY3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtb2JpbGUiLCJpblNjcm9sbCIsImZpcnN0IiwicGVyZm9tVHJhbnNpdGlvbiIsInNlY3Rpb25FcSIsInBvc2l0aW9uIiwiY3VycmVudFNlY3Rpb24iLCJlcSIsIm1lbnVUaGVtZSIsImF0dHIiLCJzaWRlTWVudSIsInRyYW5zZm9ybSIsImNvbmNhdCIsInNpYmxpbmdzIiwic2V0VGltZW91dCIsInNjcm9sbFZpZXdwb3J0IiwiZGlyZWN0aW9uIiwiYWN0aXZlU2VjdGlvbiIsImZpbHRlciIsIm5leHRTZWN0aW9uIiwibmV4dCIsInByZXZTZWN0aW9uIiwicHJldiIsImluZGV4IiwiZGVsdGFZIiwib3JpZ2luYWxFdmVudCIsInRhZ05hbWUiLCJ0YXJnZXQiLCJ0b0xvd2VyQ2FzZSIsImtleUNvZGUiLCJyZXFTZWN0aW9uIiwic3dpcGUiLCJldmVudCIsInNjcm9sbGVyIiwidmlld3BvcnRTY3JvbGxlciIsInNjcm9sbERpcmVjdGlvbiIsInBsYXllciIsInBsYXllckNvbnRhaW5lciIsIm11dGVDb250cm9sZXIiLCJldmVudHNpbml0IiwicGF1c2VWaWRlbyIsInBsYXlWaWRlbyIsIm11dGUiLCJ1bk11dGUiLCJiYXIiLCJjbGlja2VkUG9zaXRpb24iLCJsYXllclgiLCJuZXdCdXR0b25Qb3NpdGlvblBlcmNlbnQiLCJuZXdQbGF5YmFja1Bvc2l0aW9uU2VjIiwiZ2V0RHVyYXRpb24iLCJsZWZ0Iiwic2Vla1RvIiwidmFsdW1lIiwiY2xpY2tlZFBvc2l0aW9uVmFsdW1lIiwiYnV0dG9uUG9zaXRpb25WYWx1bWUiLCJzZXRWb2x1bWUiLCJjb25zb2xlIiwibG9nIiwib25QbGF5ZXJSZWFkeSIsImludGVydmFsIiwiZHVyYXRpblNlYyIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNvbXBsZXRlZFNlYyIsImdldEN1cnJlbnRUaW1lIiwiY29tcGxldGVkUGVyY2VudCIsIm9uUGxheWVyU3RhdGVDaGFuZ2UiLCJvbllvdVR1YmVJZnJhbWVBUElSZWFkeSIsIllUIiwiUGxheWVyIiwidmlkZW9JZCIsImV2ZW50cyIsInBsYXllclZhcnMiLCJkaXNhYmxla2IiLCJzaG93aW5mbyIsInJlbCIsImF1dG9wbGF5IiwibW9kZXN0YnJhbmRpbmciLCJmaW5kQmxvY2tCeUFsaWFzIiwiYWxpYXMiLCJuZHgiLCJpdGVtVG9TaG93IiwiY3VySXRlbSIsInNsaWRlcyIsImFycm93IiwiY3VycmVudE5keCIsInNsaWRlciIsImNvbnRhaW5zIiwidGFyZ2V0VmFsdWUiLCJkYXRhc2V0IiwiYnV0dG9uIiwiY2hpbGRyZW4iLCJkb1RyYW5zaXRpb24iLCJzdHlsZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxRQUFBLEdB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LE1BQUEsR0FBQUssS0FBQSxDQUFBTCxNQUFBO0VBRUEsSUFBQUEsTUFBQSxDQUFBN0YsU0FBQSxDQUFBeUosUUFBQSxDQUFBLGdCQUFBLENBQUEsRUFBQTtJQUNBLElBQUFDLFdBQUEsR0FBQTdELE1BQUEsQ0FBQThELE9BQUEsQ0FBQUMsTUFBQTtJQUVBLElBQUFGLFdBQUEsS0FBQSxPQUFBLEVBQUE7TUFDQSxJQUFBSCxVQUFBLEdBQUFGLE1BQUEsQ0FBQVEsUUFBQSxDQUFBdkwsTUFBQSxHQUFBLENBQUEsRUFBQTtRQUNBaUwsVUFBQSxJQUFBLENBQUE7UUFDQU8sWUFBQSxDQUFBUCxVQUFBLENBQUE7TUFDQSxDQUFBLE1BQUE7SUFDQTtJQUVBLElBQUFHLFdBQUEsS0FBQSxNQUFBLEVBQUE7TUFDQSxJQUFBSCxVQUFBLEdBQUEsQ0FBQSxFQUFBO1FBQ0FBLFVBQUEsSUFBQSxDQUFBO1FBQ0FPLFlBQUEsQ0FBQVAsVUFBQSxDQUFBO01BQ0EsQ0FBQSxNQUFBO0lBQ0E7RUFDQTtBQUNBLENBQUE7QUFFQSxTQUFBTyxZQUFBQSxDQUFBckUsS0FBQSxFQUFBO0VBQ0E0RCxNQUFBLENBQUFVLEtBQUEsQ0FBQWxGLFNBQUEsa0JBQUFDLE1BQUEsQ0FBQVcsS0FBQSxHQUFBLEdBQUEsT0FBQTtBQUNBO0FBRUE2RCxLQUFBLENBQUFwSixnQkFBQSxDQUFBLE9BQUEsRUFBQXNKLE1BQUEsQ0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgb3Blbkl0ZW0gPSBpdGVtID0+IHtcclxuICBjb25zdCBjb250YWluZXIgPSBpdGVtLmNsb3Nlc3QoJy50ZWFtX19pdGVtJyk7XHJcbiAgY29uc3QgY29udGVudEJsb2NrID0gY29udGFpbmVyLmZpbmQoJy50ZWFtX19jb250ZW50Jyk7XHJcbiAgY29uc3QgdGV4dEJsb2NrID0gY29udGVudEJsb2NrLmZpbmQoJy50ZWFtX19jb250ZW50LWJsb2NrJyk7XHJcbiAgY29uc3QgcmVxSGVpZ2h0ID0gdGV4dEJsb2NrLmhlaWdodCgpO1xyXG5cclxuICBjb250YWluZXIuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgY29udGVudEJsb2NrLmhlaWdodChyZXFIZWlnaHQpO1xyXG59XHJcblxyXG5jb25zdCBjbG9zZUV2ZXJ5SXRlbSA9IGNvbnRhaW5lciA9PiB7XHJcbiAgY29uc3QgaXRlbXMgPSBjb250YWluZXIuZmluZCgnLnRlYW1fX2NvbnRlbnQnKTtcclxuICBjb25zdCBpdGVtQ29udGlhbmVyID0gY29udGFpbmVyLmZpbmQoJy50ZWFtX19pdGVtJyk7XHJcblxyXG4gIGl0ZW1Db250aWFuZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gIGl0ZW1zLmhlaWdodCgwKVxyXG59XHJcblxyXG4kKCcudGVhbV9fbmFtZScpLmNsaWNrKGUgPT4ge1xyXG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9ICR0aGlzLmNsb3Nlc3QoJy50ZWFtJyk7XHJcbiAgY29uc3QgZWxlbUNvbnRhaW5lciA9ICR0aGlzLmNsb3Nlc3QoJy50ZWFtX19pdGVtJyk7XHJcbiAgXHJcbiAgaWYgKGVsZW1Db250YWluZXIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICBjbG9zZUV2ZXJ5SXRlbShjb250YWluZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgY2xvc2VFdmVyeUl0ZW0oY29udGFpbmVyKTtcclxuICBvcGVuSXRlbSgkdGhpcyk7XHJcbiAgfVxyXG59KSIsImNvbnN0IG1lc3VyZVdpZHRoID0gKGl0ZW0pID0+IHtcclxuXHJcbiAgbGV0IHJlcUl0ZW1XaWR0aCA9IDA7XHJcblxyXG4gIGNvbnN0IHNjcmVlbldpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgY29uc3QgY29udGFpbmVyID0gaXRlbS5jbG9zZXN0KCcuY29sb3JzLW1lbnUnKTtcclxuICBjb25zdCBidXR0b25zQmxvY2tzID0gY29udGFpbmVyLmZpbmQoJy5jb2xvcnMtbWVudV9fYnV0dG9uJyk7XHJcbiAgY29uc3QgdGl0bGVzV2lkdGggPSBidXR0b25zQmxvY2tzLndpZHRoKCkgKiBidXR0b25zQmxvY2tzLmxlbmd0aDtcclxuICBcclxuICBjb25zdCB0ZXh0Q29udGFpbmVyID0gaXRlbS5maW5kKCcuY29sb3JzLW1lbnVfX2NvbnRhaW5lcicpO1xyXG4gIGNvbnN0IHBhZGRpbmdMZWZ0ID0gcGFyc2VJbnQodGV4dENvbnRhaW5lci5jc3MoJ3BhZGRpbmctbGVmdCcpKTtcclxuICBjb25zdCBwYWRkaW5nUmlnaHQgPSBwYXJzZUludCh0ZXh0Q29udGFpbmVyLmNzcygncGFkZGluZy1yaWdodCcpKTtcclxuXHJcbiAgY29uc3QgaXNNb2JpbGUgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzY4cHgpJykubWF0Y2hlcztcclxuICBcclxuICBpZiAoaXNNb2JpbGUpIHtcclxuICAgIHJlcUl0ZW1XaWR0aCA9IHNjcmVlbldpZHRoIC0gdGl0bGVzV2lkdGg7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcUl0ZW1XaWR0aCA9IDUwMDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBjb250YWluZXI6IHJlcUl0ZW1XaWR0aCxcclxuICAgIHRleHRDb250YWluZXI6IHJlcUl0ZW1XaWR0aCAtIHBhZGRpbmdMZWZ0IC0gcGFkZGluZ1JpZ2h0XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY2xvc2VFdmVyeUl0ZW1JbkNvbnRhaW5lciA9IChjb250YWluZXIpID0+IHtcclxuICBjb25zdCBpdGVtID0gY29udGFpbmVyLmZpbmQoJy5jb2xvcnMtbWVudV9faXRlbScpO1xyXG4gIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIuZmluZCgnLmNvbG9ycy1tZW51X19jb250ZW50Jyk7XHJcblxyXG4gIGl0ZW0ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1jb2xvcnMnKTtcclxuICBjb250ZW50LndpZHRoKDApO1xyXG59O1xyXG5cclxuY29uc3Qgb3Blbkl0ZW1Db2xvcnMgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGhpZGRlbkNvbnRlbnQgPSBpdGVtLmZpbmQoJy5jb2xvcnMtbWVudV9fY29udGVudCcpO1xyXG4gIGNvbnN0IHJlcVdpZHRoID0gbWVzdXJlV2lkdGgoaXRlbSk7XHJcbiAgY29uc3QgdGV4dEJsb2NrID0gaXRlbS5maW5kKCcuY29sb3JzLW1lbnVfX2NvbnRhaW5lcicpO1xyXG5cclxuICBpdGVtLmFkZENsYXNzKCdhY3RpdmUtY29sb3JzJyk7XHJcbiAgaGlkZGVuQ29udGVudC53aWR0aChyZXFXaWR0aC5jb250YWluZXIpO1xyXG4gIHRleHRCbG9jay53aWR0aChyZXFXaWR0aC50ZXh0Q29udGFpbmVyKTtcclxufTtcclxuXHJcbiQoJy5jb2xvcnMtbWVudV9fYnV0dG9uJykub24oJ2NsaWNrJywgKGUpID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gIGNvbnN0IGl0ZW0gPSAkdGhpcy5jbG9zZXN0KCcuY29sb3JzLW1lbnVfX2l0ZW0nKTtcclxuICBjb25zdCBpdGVtT3BlbmVkID0gaXRlbS5oYXNDbGFzcygnYWN0aXZlLWNvbG9ycycpO1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9ICR0aGlzLmNsb3Nlc3QoJy5jb2xvcnMtbWVudScpO1xyXG5cclxuICBpZiAoaXRlbU9wZW5lZCkge1xyXG4gICAgY2xvc2VFdmVyeUl0ZW1JbkNvbnRhaW5lcihjb250YWluZXIpXHJcbiAgfSBlbHNlIHtcclxuICAgIGNsb3NlRXZlcnlJdGVtSW5Db250YWluZXIoY29udGFpbmVyKTtcclxuICAgIG9wZW5JdGVtQ29sb3JzKGl0ZW0pO1xyXG4gIH1cclxufSk7XHJcbiIsImxldCBnZWFyT25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlYXJfX2J1dHRvbi1vbmUnKTtcclxubGV0IGdlYXJUd28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2Vhcl9fYnV0dG9uLXR3bycpO1xyXG5sZXQgZ2VhclJvdGF0aW9uT25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlYXItaW1hZ2Utb25lJyk7XHJcbmxldCBnZWFyUm90YXRpb25Ud28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2Vhci1pbWFnZS10d28nKTtcclxubGV0IGdlYXJEcm9wZG93bk9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZWFyX19kcm9wZG93bi1vbmUnKTtcclxubGV0IGdlYXJEcm9wZG93blR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZWFyX19kcm9wZG93bi10d28nKTtcclxuXHJcbmZ1bmN0aW9uIGNsaWNrR2VhcigpIHtcclxuICBnZWFyUm90YXRpb25PbmUuY2xhc3NMaXN0LnRvZ2dsZSgnZ2Vhci1pbWFnZS0tcm90YXRpb24nKTtcclxuICBnZWFyUm90YXRpb25Ud28uY2xhc3NMaXN0LnRvZ2dsZSgnZ2Vhci1pbWFnZS0tcm90YXRpb24nKTtcclxuICBnZWFyRHJvcGRvd25PbmUuY2xhc3NMaXN0LnRvZ2dsZSgnZ2Vhcl9fZHJvcGRvd24tLWFjdGl2ZScpO1xyXG4gIGdlYXJEcm9wZG93blR3by5jbGFzc0xpc3QudG9nZ2xlKCdnZWFyX19kcm9wZG93bi0tYWN0aXZlJyk7XHJcbn1cclxuXHJcbmdlYXJPbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0dlYXIpO1xyXG5nZWFyVHdvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tHZWFyKTtcclxuXHJcbiIsImxldCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGFtYnVyZ2VyJyk7XHJcbmxldCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI292ZXJsYXknKTtcclxubGV0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcblxyXG5cclxubGV0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm92ZXJsYXktbWVudV9fbGluaycpXHJcblxyXG5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcclxuICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWN0aXZlTWVudSk7XHJcbn0pXHJcblxyXG5mdW5jdGlvbiBhY3RpdmVNZW51KCkge1xyXG4gIGhhbWJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKCdoYW1idXJnZXItLWFjdGl2ZScpO1xyXG4gIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnb3ZlcmxheS0tYWN0aXZlJyk7XHJcbiAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdib2R5LS1hY3RpdmUtbWVudScpO1xyXG59XHJcblxyXG5oYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3RpdmVNZW51KTtcclxuIiwibGV0IG15TWFwO1xyXG4gXHJcbmNvbnN0IGluaXQgPSAoKSA9PiB7XHJcbiBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICBjZW50ZXI6IFs1NS43NTU0NjEsIDM3LjYxOTIyOF0sXHJcbiAgIHpvb206IDE0LFxyXG4gICBjb250cm9sczogW11cclxuIH0pO1xyXG5cclxuIGNvbnN0IGNvb3JkcyA9IFtcclxuICBbNTUuNzU4NDAzLCAzNy41ODM1NjFdLFxyXG4gIFs1NS43NTY0NTIsIDM3LjYyMDU3NF0sXHJcbiAgWzU1Ljc1MDIwMSwgMzcuNjAzNjAyXSxcclxuICBbNTUuNzQzOTM3LCAzNy41ODEwNDFdXHJcbiBdO1xyXG5cclxuIGNvbnN0IG15Q29sbGVjdGlvbiA9IG5ldyB5bWFwcy5HZW9PYmplY3RDb2xsZWN0aW9uKHt9LCB7XHJcbiAgZHJhZ2dhYmxlOiBmYWxzZSwgXHJcbiAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gIGljb25JbWFnZUhyZWY6ICdJTUcvbWFya2VyLnN2ZycsXHJcbiAgaWNvbkltYWdlU2l6ZTogWzMwLCA0Ml0sXHJcbiAgaWNvbkltYWdlT2Zmc2V0OiBbLTMsIC00Ml1cclxuIH0pO1xyXG5cclxuIGNvb3Jkcy5mb3JFYWNoKGNvb3JkID0+IHtcclxuICBteUNvbGxlY3Rpb24uYWRkKG5ldyB5bWFwcy5QbGFjZW1hcmsoY29vcmQpKTtcclxuIH0pO1xyXG5cclxuIG15TWFwLmdlb09iamVjdHMuYWRkKG15Q29sbGVjdGlvbik7XHJcblxyXG4gbXlNYXAuYmVoYXZpb3JzLmRpc2FibGUoJ3Njcm9sbFpvb20nKTtcclxufVxyXG4gXHJcbnltYXBzLnJlYWR5KGluaXQpOyIsImNvbnN0IHZhbGlkYXRlRmllbGRzID0gKGZvcm0sIGZpZWxkc0FycmF5KSA9PiB7XHJcbiAgZmllbGRzQXJyYXkuZm9yRWFjaChmaWVsZWQgPT4ge1xyXG4gICAgZmllbGVkLnJlbW92ZUNsYXNzKFwiaW5wdXQtZXJyb3JcIik7XHJcbiAgICBpZiAoZmllbGVkLnZhbCgpLnRyaW0oKSA9PSBcIlwiKSB7XHJcbiAgICAgIGZpZWxlZC5hZGRDbGFzcyhcImlucHV0LWVycm9yXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBlcnJvckZpZWxkcyA9IGZvcm0uZmluZChcIi5pbnB1dC1lcnJvclwiKTtcclxuXHJcbiAgcmV0dXJuIGVycm9yRmllbGRzLmxlbmd0aCA9PSAwO1xyXG59XHJcblxyXG4kKCcuZm9ybScpLnN1Ym1pdChlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IGZvcm0gPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgbmFtZSA9IGZvcm0uZmluZChcIltuYW1lPSduYW1lJ11cIik7XHJcbiAgY29uc3QgcGhvbmUgPSBmb3JtLmZpbmQoXCJbbmFtZT0ncGhvbmUnXVwiKTtcclxuICBjb25zdCBjb21tZW50ID0gZm9ybS5maW5kKFwiW25hbWU9J2NvbW1lbnQnXVwiKTtcclxuICBjb25zdCB0byA9IGZvcm0uZmluZChcIltuYW1lPSd0byddXCIpO1xyXG5cclxuICBjb25zdCBtb2RhbCA9ICQoXCIjbW9kYWxcIik7XHJcbiAgY29uc3QgY29udGVudCA9IG1vZGFsLmZpbmQoJy5tb2RhbF9fY29udGVudCcpO1xyXG5cclxuICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdGVGaWVsZHMoZm9ybSwgW25hbWUsIHBob25lLCBjb21tZW50LCB0b10pO1xyXG5cclxuICBpZiAoaXNWYWxpZCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgbmFtZTogbmFtZS52YWwoKSxcclxuICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXHJcbiAgICAgICAgY29tbWVudDogY29tbWVudC52YWwoKSxcclxuICAgICAgICB0bzogdG8udmFsKCksXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29udGVudC50ZXh0KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgJCgnLmZvcm0nKVswXS5yZXNldCgpO1xyXG4gICAgICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICB0eXBlOiBcImlubGluZVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBlcnJvcjogKGRhdGEpID0+IHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgY29udGVudC50ZXh0KFwi0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwXCIpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiaW5saW5lXCIsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuJChcIi5hcHAtc3VibWl0LWJ1dHRvblwiKS5jbGljaygoZSkgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgJC5mYW5jeWJveC5jbG9zZSgpO1xyXG59KTsiLCJjb25zdCBzZWN0aW9ucyA9ICQoJ3NlY3Rpb24nKTtcclxuY29uc3QgZGlzcGxheSA9ICQoJy5tYWluY29udGVudCcpO1xyXG5cclxuY29uc3QgbW9iaWxlRGV0ZWN0ID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbmNvbnN0IGlzTW9iaWxlID0gbW9iaWxlRGV0ZWN0Lm1vYmlsZSgpO1xyXG5cclxubGV0IGluU2Nyb2xsID0gZmFsc2U7XHJcblxyXG5zZWN0aW9ucy5maXJzdCgpLmFkZENsYXNzKCd0aGlzLXNlY3Rpb24nKTtcclxuXHJcbmNvbnN0IHBlcmZvbVRyYW5zaXRpb24gPSBzZWN0aW9uRXEgPT4ge1xyXG5cclxuICBpZiAoaW5TY3JvbGwgPT0gZmFsc2UpIHtcclxuICAgIGluU2Nyb2xsID0gdHJ1ZTtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gc2VjdGlvbkVxICogLTEwMDtcclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbnMuZXEoc2VjdGlvbkVxKTtcclxuICAgICAgY29uc3QgbWVudVRoZW1lID1jdXJyZW50U2VjdGlvbi5hdHRyKCdkYXRhLXRoZW1lJyk7XHJcbiAgICAgIGNvbnN0IHNpZGVNZW51ID0gJCgnLmZpeGVkLW1lbnUnKTtcclxuXHJcbiAgICAgIGlmIChtZW51VGhlbWUgPT0gJ3doaXRlJykge1xyXG4gICAgICAgIHNpZGVNZW51LmFkZENsYXNzKCdmaXhlZC1tZW51LS13aGl0ZScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNpZGVNZW51LnJlbW92ZUNsYXNzKCdmaXhlZC1tZW51LS13aGl0ZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgZGlzcGxheS5jc3Moe1xyXG4gICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7cG9zaXRpb259JSlgXHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWN0aW9ucy5lcShzZWN0aW9uRXEpLmFkZENsYXNzKCd0aGlzLXNlY3Rpb24nKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCd0aGlzLXNlY3Rpb24nKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaW5TY3JvbGwgPSBmYWxzZTtcclxuXHJcbiAgICAgIHNpZGVNZW51XHJcbiAgICAgICAgLmZpbmQoJy5maXhlZC1tZW51X19pdGVtJylcclxuICAgICAgICAuZXEoc2VjdGlvbkVxKVxyXG4gICAgICAgIC5hZGRDbGFzcygnZml4ZWQtbWVudV9faXRlbS0tYWN0aXZlJylcclxuICAgICAgICAuc2libGluZ3MoKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnZml4ZWQtbWVudV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICB9LCAxMzAwKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHNjcm9sbFZpZXdwb3J0ID0gZGlyZWN0aW9uID0+IHtcclxuICBjb25zdCBhY3RpdmVTZWN0aW9uID0gc2VjdGlvbnMuZmlsdGVyKCcudGhpcy1zZWN0aW9uJyk7XHJcbiAgY29uc3QgbmV4dFNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uLm5leHQoKTtcclxuICBjb25zdCBwcmV2U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ucHJldigpO1xyXG5cclxuICBpZiAoZGlyZWN0aW9uID09ICduZXh0JyAmJiBuZXh0U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgIHBlcmZvbVRyYW5zaXRpb24obmV4dFNlY3Rpb24uaW5kZXgoKSlcclxuICB9XHJcblxyXG4gIGlmIChkaXJlY3Rpb24gPT0gJ3ByZXYnICYmIHByZXZTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgcGVyZm9tVHJhbnNpdGlvbihwcmV2U2VjdGlvbi5pbmRleCgpKVxyXG4gIH1cclxufTtcclxuXHJcbiQod2luZG93KS5vbignd2hlZWwnLCBlPT4ge1xyXG4gIGNvbnN0IGRlbHRhWSA9IGUub3JpZ2luYWxFdmVudC5kZWx0YVk7XHJcblxyXG4gIGlmIChkZWx0YVkgPiAwKSB7XHJcbiAgICAgc2Nyb2xsVmlld3BvcnQoJ25leHQnKTtcclxuICB9XHJcblxyXG4gIGlmIChkZWx0YVkgPCAwKSB7XHJcbiAgICBzY3JvbGxWaWV3cG9ydCgncHJldicpO1xyXG4gIH1cclxufSk7XHJcblxyXG4kKHdpbmRvdykub24oJ2tleWRvd24nLCBlID0+IHtcclxuXHJcbiAgY29uc3QgdGFnTmFtZSA9IGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgaWYodGFnTmFtZSAhPSAnaW5wdXQnICYmIHRhZ05hbWUgIT0gJ3RleHRhcmVhJykge1xyXG4gICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgY2FzZSAzODpcclxuICAgICAgICBzY3JvbGxWaWV3cG9ydCgncHJldicpO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSA0MDpcclxuICAgICAgICBzY3JvbGxWaWV3cG9ydCgnbmV4dCcpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG4kKCcud3JhcHBlcicpLm9uKCd0b3VjaG1vdmUnLCBlID0+IGUucHJldmVudERlZmF1bHQoKSk7XHJcblxyXG4kKCdbZGF0YS1zY3JvbGwtdG8nKS5jbGljayhlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gIGNvbnN0IHRhcmdldCA9ICR0aGlzLmF0dHIoJ2RhdGEtc2Nyb2xsLXRvJyk7XHJcbiAgY29uc3QgcmVxU2VjdGlvbiA9ICQoYFtkYXRhLXNlY3Rpb249JHt0YXJnZXR9XWApO1xyXG5cclxuICBwZXJmb21UcmFuc2l0aW9uKHJlcVNlY3Rpb24uaW5kZXgoKSk7XHJcbn0pO1xyXG5cclxuaWYgKGlzTW9iaWxlKSB7XHJcbiAgICAkKFwiYm9keVwiKS5zd2lwZSh7XHJcbiAgICBzd2lwZTogZnVuY3Rpb24gKGV2ZW50LCBkaXJlY3Rpb24pIHtcclxuICAgICAgY29uc3Qgc2Nyb2xsZXIgPSB2aWV3cG9ydFNjcm9sbGVyKCk7XHJcbiAgICAgIGxldCBzY3JvbGxEaXJlY3Rpb24gPSBcIlwiO1xyXG5cclxuICAgICAgaWYgKGRpcmVjdGlvbiA9PSAndXAnKSBzY3JvbGxEaXJlY3Rpb24gPSAnbmV4dCc7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2Rvd24nKSBzY3JvbGxEaXJlY3Rpb24gPSAncHJldic7XHJcblxyXG4gICAgICBzY3JvbGxlcltzY3JvbGxEaXJlY3Rpb25dKCk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG59XHJcblxyXG4iLCJsZXQgcGxheWVyO1xyXG5jb25zdCBwbGF5ZXJDb250YWluZXIgPSAkKCcucGxheWVyJyk7XHJcbmNvbnN0IG11dGVDb250cm9sZXIgPSAkKCcucGxheWVyX19zb3VuZCcpXHJcblxyXG5sZXQgZXZlbnRzaW5pdCA9ICgpID0+IHtcclxuICAkKCcucGxheWVyX19kdXJhdGlvbi1wbGF5LCAucGxheWVyX19kdXJhdGlvbi1wYXVzZScpLmNsaWNrKGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmIChwbGF5ZXJDb250YWluZXIuaGFzQ2xhc3MoJ3BsYXllci0tcGF1c2VkJykpIHtcclxuICAgICAgcGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnLnBsYXllcl9fc291bmQtb2ZmLCAucGxheWVyX19zb3VuZC1vbicpLmNsaWNrKGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmIChtdXRlQ29udHJvbGVyLmhhc0NsYXNzKCdwbGF5ZXJfX3NvdW5kLS1uby1tdXRlJykpIHtcclxuICAgICAgbXV0ZUNvbnRyb2xlci5yZW1vdmVDbGFzcygncGxheWVyX19zb3VuZC0tbm8tbXV0ZScpO1xyXG4gICAgICBwbGF5ZXIubXV0ZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbXV0ZUNvbnRyb2xlci5hZGRDbGFzcygncGxheWVyX19zb3VuZC0tbm8tbXV0ZScpO1xyXG4gICAgICBwbGF5ZXIudW5NdXRlKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5wbGF5ZXJfX3BsYXliYWNrJykuY2xpY2soZSA9PiB7XHJcbiAgICBjb25zdCBiYXIgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBjbGlja2VkUG9zaXRpb24gPSBlLm9yaWdpbmFsRXZlbnQubGF5ZXJYO1xyXG4gICAgY29uc3QgbmV3QnV0dG9uUG9zaXRpb25QZXJjZW50ID0gKGNsaWNrZWRQb3NpdGlvbiAvIGJhci53aWR0aCgpKSAqIDEwMDtcclxuICAgIGNvbnN0IG5ld1BsYXliYWNrUG9zaXRpb25TZWMgPSBcclxuICAgICAgKHBsYXllci5nZXREdXJhdGlvbigpIC8gMTAwKSAqIG5ld0J1dHRvblBvc2l0aW9uUGVyY2VudDtcclxuXHJcbiAgICAkKCcucGxheWVyX19idXR0b24tcGxheWJhY2snKS5jc3MgKHtcclxuICAgICAgbGVmdDogYCR7bmV3QnV0dG9uUG9zaXRpb25QZXJjZW50fSVgXHJcbiAgICB9KTtcclxuXHJcbiAgICBwbGF5ZXIuc2Vla1RvKG5ld1BsYXliYWNrUG9zaXRpb25TZWMpO1xyXG4gIH0pO1xyXG5cclxuICAkKCcucGxheWVyX19zcGxhc2gsIC5wbGF5ZXJfX3BsYXktaW1hZ2UnKS5jbGljayhlID0+IHtcclxuICAgIHBsYXllci5wbGF5VmlkZW8oKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLnBsYXllcl9fdmFsdW1lJykuY2xpY2soZSA9PiB7XHJcbiAgICBjb25zdCB2YWx1bWUgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBjbGlja2VkUG9zaXRpb25WYWx1bWUgPSBlLm9yaWdpbmFsRXZlbnQubGF5ZXJYO1xyXG4gICAgY29uc3QgYnV0dG9uUG9zaXRpb25WYWx1bWUgPSAoY2xpY2tlZFBvc2l0aW9uVmFsdW1lIC8gdmFsdW1lLndpZHRoKCkpICogMTAwO1xyXG4gICAgICBcclxuICAgICQoJy5wbGF5ZXJfX2J1dHRvbi12YWx1bWUnKS5jc3MgKHtcclxuICAgICAgbGVmdDogYCR7YnV0dG9uUG9zaXRpb25WYWx1bWV9JWBcclxuICAgIH0pO1xyXG5cclxuICAgIHBsYXllci5zZXRWb2x1bWUoYnV0dG9uUG9zaXRpb25WYWx1bWUpO1xyXG4gICAgY29uc29sZS5sb2coYnV0dG9uUG9zaXRpb25WYWx1bWUpXHJcbiAgfSlcclxufTtcclxuXHJcbmNvbnN0IG9uUGxheWVyUmVhZHkgPSAoKSA9PiB7XHJcbiAgbGV0IGludGVydmFsO1xyXG4gIGNvbnN0IGR1cmF0aW5TZWMgPSBwbGF5ZXIuZ2V0RHVyYXRpb24oKTtcclxuXHJcbiAgaWYgKHR5cGVvZiBpbnRlcnZhbCAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgfVxyXG5cclxuICBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgIGNvbnN0IGNvbXBsZXRlZFNlYyA9IHBsYXllci5nZXRDdXJyZW50VGltZSgpO1xyXG4gICAgY29uc3QgY29tcGxldGVkUGVyY2VudCA9IChjb21wbGV0ZWRTZWMgLyBkdXJhdGluU2VjKSAqIDEwMDtcclxuXHJcbiAgICAkKCcucGxheWVyX19idXR0b24tcGxheWJhY2snKS5jc3Moe1xyXG4gICAgICBsZWZ0OiBgJHtjb21wbGV0ZWRQZXJjZW50fSVgXHJcbiAgICB9KTtcclxuICB9LCAxMDAwKTtcclxufTtcclxuXHJcbmNvbnN0IG9uUGxheWVyU3RhdGVDaGFuZ2UgPSBldmVudCA9PiB7XHJcbiAgc3dpdGNoIChldmVudC5kYXRhKSB7XHJcbiAgICBjYXNlIDE6XHJcbiAgICAgIHBsYXllckNvbnRhaW5lci5hZGRDbGFzcygncGxheWVyLS1hY3RpdmUnKTtcclxuICAgICAgcGxheWVyQ29udGFpbmVyLmFkZENsYXNzKCdwbGF5ZXItLXBhdXNlZCcpO1xyXG4gICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICBwbGF5ZXJDb250YWluZXIucmVtb3ZlQ2xhc3MoJ3BsYXllci0tYWN0aXZlJyk7XHJcbiAgICAgICAgcGxheWVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdwbGF5ZXItLXBhdXNlZCcpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCkge1xyXG4gIHBsYXllciA9IG5ldyBZVC5QbGF5ZXIoJ3lvdXR1YmUtcGxheWVyJywge1xyXG4gICAgaGVpZ2h0OiAnMzkwJyxcclxuICAgIHdpZHRoOiAnNjYyJyxcclxuICAgIHZpZGVvSWQ6ICdzRGhfa0ZQLXBwaycsXHJcbiAgICBldmVudHM6IHtcclxuICAgICAgJ29uUmVhZHknOiBvblBsYXllclJlYWR5LFxyXG4gICAgICAnb25TdGF0ZUNoYW5nZSc6IG9uUGxheWVyU3RhdGVDaGFuZ2VcclxuICAgIH0sXHJcbiAgICBwbGF5ZXJWYXJzOiB7XHJcbiAgICAgIGNvbnRyb2xzOiAwLFxyXG4gICAgICBkaXNhYmxla2I6IDAsXHJcbiAgICAgIHNob3dpbmZvOiAwLFxyXG4gICAgICByZWw6IDAsXHJcbiAgICAgIGF1dG9wbGF5OiAwLFxyXG4gICAgICBtb2Rlc3RicmFuZGluZzogMFxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5ldmVudHNpbml0KCk7XHJcbiIsImNvbnN0IGZpbmRCbG9ja0J5QWxpYXMgPSBhbGlhcyA9PiB7XHJcbiAgcmV0dXJuICQoJy5yZXZpZXdzX19pdGVtJykuZmlsdGVyKChuZHgsIGl0ZW0pID0+IHtcclxuICAgIHJldHVybiAkKGl0ZW0pLmF0dHIoJ2RhdGEtbGlua2VkJykgPT0gYWxpYXM7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4kKCcuaW50ZXJhY3RpdmUtYXZhdGFyX19saW5rJykuY2xpY2soZSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKCdkYXRhLW9wZW4nKTtcclxuICBjb25zdCBpdGVtVG9TaG93ID0gZmluZEJsb2NrQnlBbGlhcyh0YXJnZXQpO1xyXG4gIGNvbnN0IGN1ckl0ZW0gPSAkdGhpcy5jbG9zZXN0KCcucmV2aWV3c19fc3dpdGhlci1pdGVtJyk7XHJcblxyXG4gIGl0ZW1Ub1Nob3cuYWRkQ2xhc3MoJ3Jldmlld3NfX2l0ZW0tLWFjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ3Jldmlld3NfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gIGN1ckl0ZW0uYWRkQ2xhc3MoJ2ludGVyYWN0aXZlLWF2YXRhci0tYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaW50ZXJhY3RpdmUtYXZhdGFyLS1hY3RpdmUnKTtcclxufSk7IiwibGV0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX3NsaWRlcycpO1xyXG5sZXQgYXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19idXR0b25zJyk7XHJcbmxldCBjdXJyZW50TmR4ID0gMDtcclxuXHJcbmNvbnN0IHNsaWRlciA9IChldmVudCkgPT4ge1xyXG4gIGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcblxyXG4gIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXJfX2J1dHRvbicpKSB7XHJcbiAgICBsZXQgdGFyZ2V0VmFsdWUgPSB0YXJnZXQuZGF0YXNldC5idXR0b247XHJcblxyXG4gICAgaWYgKHRhcmdldFZhbHVlID09PSAncmlnaHQnKSB7XHJcbiAgICAgIGlmIChjdXJyZW50TmR4IDwgc2xpZGVzLmNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICBjdXJyZW50TmR4ICs9IDE7XHJcbiAgICAgICAgZG9UcmFuc2l0aW9uKGN1cnJlbnROZHgpO1xyXG4gICAgICB9IGVsc2UgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAodGFyZ2V0VmFsdWUgPT09ICdsZWZ0Jykge1xyXG4gICAgICBpZiAoY3VycmVudE5keCA+IDApIHtcclxuICAgICAgICBjdXJyZW50TmR4IC09IDE7XHJcbiAgICAgICAgZG9UcmFuc2l0aW9uKGN1cnJlbnROZHgpO1xyXG4gICAgICB9IGVsc2UgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGRvVHJhbnNpdGlvbihpbmRleCkge1xyXG4gIHNsaWRlcy5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHtpbmRleCAqIDEwMH0lKWA7XHJcbn1cclxuXHJcbmFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2xpZGVyKTtcclxuIl19
