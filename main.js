"use strict";

var openItem = function openItem(item) {
  var container = item.closest('.team__item');
  var contentBlock = container.find('.team__content');
  var textBlock = contentBlock.find('.team__content-block');
  var reqHeight = textBlock.height();
  container.addClass('active');
  contentBlock.height(reqHeight);
};
var closeEveryItem = function closeEveryItem(container) {
  var items = container.find('.team__content');
  var itemContianer = container.find('.team__item');
  itemContianer.removeClass('active');
  items.height(0);
};
$('.team__name').click(function (e) {
  var $this = $(e.currentTarget);
  var container = $this.closest('.team');
  var elemContainer = $this.closest('.team__item');
  if (elemContainer.hasClass('active')) {
    closeEveryItem(container);
  } else {
    closeEveryItem(container);
    openItem($this);
  }
});
var mesureWidth = function mesureWidth(item) {
  var reqItemWidth = 0;
  var screenWidth = $(window).width();
  var container = item.closest('.colors-menu');
  var buttonsBlocks = container.find('.colors-menu__button');
  var titlesWidth = buttonsBlocks.width() * buttonsBlocks.length;
  var textContainer = item.find('.colors-menu__container');
  var paddingLeft = parseInt(textContainer.css('padding-left'));
  var paddingRight = parseInt(textContainer.css('padding-right'));
  var isMobile = window.matchMedia('(max-width: 768px)').matches;
  if (isMobile) {
    reqItemWidth = screenWidth - titlesWidth;
  } else {
    reqItemWidth = 500;
  }
  return {
    container: reqItemWidth,
    textContainer: reqItemWidth - paddingLeft - paddingRight
  };
};
var closeEveryItemInContainer = function closeEveryItemInContainer(container) {
  var item = container.find('.colors-menu__item');
  var content = container.find('.colors-menu__content');
  item.removeClass('active-colors');
  content.width(0);
};
var openItemColors = function openItemColors(item) {
  var hiddenContent = item.find('.colors-menu__content');
  var reqWidth = mesureWidth(item);
  var textBlock = item.find('.colors-menu__container');
  item.addClass('active-colors');
  hiddenContent.width(reqWidth.container);
  textBlock.width(reqWidth.textContainer);
};
$('.colors-menu__button').on('click', function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var item = $this.closest('.colors-menu__item');
  var itemOpened = item.hasClass('active-colors');
  var container = $this.closest('.colors-menu');
  if (itemOpened) {
    closeEveryItemInContainer(container);
  } else {
    closeEveryItemInContainer(container);
    openItemColors(item);
  }
});
var gearOne = document.querySelector('#gear__button-one');
var gearTwo = document.querySelector('#gear__button-two');
var gearRotationOne = document.querySelector('#gear-image-one');
var gearRotationTwo = document.querySelector('#gear-image-two');
var gearDropdownOne = document.querySelector('#gear__dropdown-one');
var gearDropdownTwo = document.querySelector('#gear__dropdown-two');
function clickGear() {
  gearRotationOne.classList.toggle('gear-image--rotation');
  gearRotationTwo.classList.toggle('gear-image--rotation');
  gearDropdownOne.classList.toggle('gear__dropdown--active');
  gearDropdownTwo.classList.toggle('gear__dropdown--active');
}
gearOne.addEventListener('click', clickGear);
gearTwo.addEventListener('click', clickGear);
var hamburger = document.querySelector('#hamburger');
var overlay = document.querySelector('#overlay');
var body = document.querySelector('body');
var links = document.querySelectorAll('.overlay-menu__link');
links.forEach(function (e) {
  e.addEventListener('click', activeMenu);
});
function activeMenu() {
  hamburger.classList.toggle('hamburger--active');
  overlay.classList.toggle('overlay--active');
  body.classList.toggle('body--active-menu');
}
hamburger.addEventListener('click', activeMenu);
var myMap;
var init = function init() {
  myMap = new ymaps.Map("map", {
    center: [55.755461, 37.619228],
    zoom: 14,
    controls: []
  });
  var coords = [[55.758403, 37.583561], [55.756452, 37.620574], [55.750201, 37.603602], [55.743937, 37.581041]];
  var myCollection = new ymaps.GeoObjectCollection({}, {
    draggable: false,
    iconLayout: 'default#image',
    iconImageHref: 'IMG/marker.svg',
    iconImageSize: [30, 42],
    iconImageOffset: [-3, -42]
  });
  coords.forEach(function (coord) {
    myCollection.add(new ymaps.Placemark(coord));
  });
  myMap.geoObjects.add(myCollection);
  myMap.behaviors.disable('scrollZoom');
};
ymaps.ready(init);
var validateFields = function validateFields(form, fieldsArray) {
  fieldsArray.forEach(function (fieled) {
    fieled.removeClass("input-error");
    if (fieled.val().trim() == "") {
      fieled.addClass("input-error");
    }
  });
  var errorFields = form.find(".input-error");
  return errorFields.length == 0;
};
$('.form').submit(function (e) {
  e.preventDefault();
  var form = $(e.currentTarget);
  var name = form.find("[name='name']");
  var phone = form.find("[name='phone']");
  var comment = form.find("[name='comment']");
  var to = form.find("[name='to']");
  var modal = $("#modal");
  var content = modal.find('.modal__content');
  var isValid = validateFields(form, [name, phone, comment, to]);
  if (isValid) {
    $.ajax({
      url: "https://webdev-api.loftschool.com/sendmail",
      method: "POST",
      data: {
        name: name.val(),
        phone: phone.val(),
        comment: comment.val(),
        to: to.val()
      },
      success: function success(data) {
        content.text(data.message);
        $('.form')[0].reset();
        $.fancybox.open({
          src: "#modal",
          type: "inline"
        });
      },
      error: function error(data) {
        if (data) {
          content.text("Ошибка сервера");
          $.fancybox.open({
            src: "#modal",
            type: "inline"
          });
        }
      }
    });
  }
});
$(".app-submit-button").click(function (e) {
  e.preventDefault();
  $.fancybox.close();
});
var sections = $('section');
var display = $('.maincontent');
var sideMenu = $('.fixed-menu');
var menuItems = sideMenu.find('.fixed-menu__item');
var mobileDetect = new MobileDetect(window.navigator.userAgent);
var isMobile = mobileDetect.mobile();
var inScroll = false;
sections.first().addClass('this-section');
var countSectionPosition = function countSectionPosition(sectionEq) {
  var position = sectionEq * -100;
  if (isNaN(position)) {
    console.error('передано не верное значение в countSectionPosition');
    return 0;
  }
  return position;
};
var changeMenuThemeForSection = function changeMenuThemeForSection(sectionEq) {
  var currentSection = sections.eq(sectionEq);
  var menuTheme = currentSection.attr('data-theme');
  var activeClass = 'fixed-menu--white';
  if (menuTheme == 'white') {
    sideMenu.addClass(activeClass);
  } else {
    sideMenu.removeClass('fixed-menu--white');
  }
};
var resetActiveClassForItem = function resetActiveClassForItem(item, itemEq, activeClass) {
  item.eq(itemEq).addClass(activeClass).siblings().removeClass(activeClass);
};
var perfomTransition = function perfomTransition(sectionEq) {
  if (inScroll) return;
  var transitionOver = 1000;
  var mouseInertiaOver = 300;
  inScroll = true;
  var position = countSectionPosition(sectionEq);
  changeMenuThemeForSection(sectionEq);
  display.css({
    transform: "translateY(".concat(position, "%)")
  });
  resetActiveClassForItem(sections, sectionEq, 'this-section');
  setTimeout(function () {
    inScroll = false;
    resetActiveClassForItem(menuItems, sectionEq, 'fixed-menu__item--active');
  }, transitionOver + mouseInertiaOver);
};
var viewportScroller = function viewportScroller() {
  var activeSection = sections.filter('.this-section');
  var nextSection = activeSection.next();
  var prevSection = activeSection.prev();
  return {
    next: function next() {
      if (nextSection.length) {
        perfomTransition(nextSection.index());
      }
    },
    prev: function prev() {
      if (prevSection.length) {
        perfomTransition(prevSection.index());
      }
    }
  };
};
$(window).on('wheel', function (e) {
  var deltaY = e.originalEvent.deltaY;
  var scroller = viewportScroller();
  if (deltaY > 0) {
    scroller.next();
  }
  if (deltaY < 0) {
    scroller.prev();
  }
});
$(window).on('keydown', function (e) {
  var tagName = e.target.tagName.toLowerCase();
  var userTypingInInputs = tagName == 'input' || tagName == 'textarea';
  var scroller = viewportScroller();
  if (userTypingInInputs) return;
  switch (e.keyCode) {
    case 38:
      scroller.prev();
      break;
    case 40:
      scroller.next();
      break;
  }
});
$('.wrapper').on('touchmove', function (e) {
  return e.preventDefault();
});
$('[data-scroll-to').click(function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var target = $this.attr('data-scroll-to');
  var reqSection = $("[data-section=".concat(target, "]"));
  perfomTransition(reqSection.index());
});
if (isMobile) {
  $("body").swipe({
    swipe: function swipe(event, direction) {
      var scroller = viewportScroller();
      var scrollDirection = "";
      if (direction == 'up') scrollDirection = 'next';
      if (direction == 'down') scrollDirection = 'prev';
      scroller[scrollDirection]();
    }
  });
}
var player;
var playerContainer = $('.player');
var muteControler = $('.player__sound');
var eventsinit = function eventsinit() {
  $('.player__duration-play, .player__duration-pause').click(function (e) {
    e.preventDefault();
    if (playerContainer.hasClass('player--paused')) {
      player.pauseVideo();
    } else {
      player.playVideo();
    }
  });
  $('.player__sound-off, .player__sound-on').click(function (e) {
    e.preventDefault();
    if (muteControler.hasClass('player__sound--no-mute')) {
      muteControler.removeClass('player__sound--no-mute');
      player.mute();
    } else {
      muteControler.addClass('player__sound--no-mute');
      player.unMute();
    }
  });
  $('.player__playback').click(function (e) {
    var bar = $(e.currentTarget);
    var clickedPosition = e.originalEvent.layerX;
    var newButtonPositionPercent = clickedPosition / bar.width() * 100;
    var newPlaybackPositionSec = player.getDuration() / 100 * newButtonPositionPercent;
    $('.player__button-playback').css({
      left: "".concat(newButtonPositionPercent, "%")
    });
    player.seekTo(newPlaybackPositionSec);
  });
  $('.player__splash, .player__play-image').click(function (e) {
    player.playVideo();
  });
  $('.player__valume').click(function (e) {
    var valume = $(e.currentTarget);
    var clickedPositionValume = e.originalEvent.layerX;
    var buttonPositionValume = clickedPositionValume / valume.width() * 100;
    $('.player__button-valume').css({
      left: "".concat(buttonPositionValume, "%")
    });
    player.setVolume(buttonPositionValume);
    console.log(buttonPositionValume);
  });
};
var onPlayerReady = function onPlayerReady() {
  var interval;
  var duratinSec = player.getDuration();
  if (typeof interval != 'undefined') {
    clearInterval(interval);
  }
  interval = setInterval(function () {
    var completedSec = player.getCurrentTime();
    var completedPercent = completedSec / duratinSec * 100;
    $('.player__button-playback').css({
      left: "".concat(completedPercent, "%")
    });
  }, 1000);
};
var onPlayerStateChange = function onPlayerStateChange(event) {
  switch (event.data) {
    case 1:
      playerContainer.addClass('player--active');
      playerContainer.addClass('player--paused');
      break;
    case 2:
      playerContainer.removeClass('player--active');
      playerContainer.removeClass('player--paused');
      break;
  }
};
function onYouTubeIframeAPIReady() {
  player = new YT.Player('youtube-player', {
    height: '390',
    width: '662',
    videoId: 'sDh_kFP-ppk',
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    },
    playerVars: {
      controls: 0,
      disablekb: 0,
      showinfo: 0,
      rel: 0,
      autoplay: 0,
      modestbranding: 0
    }
  });
}
eventsinit();
var findBlockByAlias = function findBlockByAlias(alias) {
  return $('.reviews__item').filter(function (ndx, item) {
    return $(item).attr('data-linked') == alias;
  });
};
$('.interactive-avatar__link').click(function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var target = $this.attr('data-open');
  var itemToShow = findBlockByAlias(target);
  var curItem = $this.closest('.reviews__swither-item');
  itemToShow.addClass('reviews__item--active').siblings().removeClass('reviews__item--active');
  curItem.addClass('interactive-avatar--active').siblings().removeClass('interactive-avatar--active');
});
var slides = document.querySelector('.slider__slides');
var arrow = document.querySelector('.slider__buttons');
var currentNdx = 0;
var slider = function slider(event) {
  var target = event.target;
  if (target.classList.contains('slider__button')) {
    var targetValue = target.dataset.button;
    if (targetValue === 'right') {
      if (currentNdx < slides.children.length - 1) {
        currentNdx += 1;
        doTransition(currentNdx);
      } else return;
    }
    if (targetValue === 'left') {
      if (currentNdx > 0) {
        currentNdx -= 1;
        doTransition(currentNdx);
      } else return;
    }
  }
};
function doTransition(index) {
  slides.style.transform = "translateX(-".concat(index * 100, "%)");
}
arrow.addEventListener('click', slider);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY29yZGVvbi5qcyIsImNvbG9ycy1tZW51LmpzIiwiZ2Vhci5qcyIsImhhbWJ1cmdlci5qcyIsIm1hcC5qcyIsIm1vZGFsLmpzIiwib3BzLmpzIiwicGxheWVyLmpzIiwicmV2aWV3cy5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJvcGVuSXRlbSIsIml0ZW0iLCJjb250YWluZXIiLCJjbG9zZXN0IiwiY29udGVudEJsb2NrIiwiZmluZCIsInRleHRCbG9jayIsInJlcUhlaWdodCIsImhlaWdodCIsImFkZENsYXNzIiwiY2xvc2VFdmVyeUl0ZW0iLCJpdGVtcyIsIml0ZW1Db250aWFuZXIiLCJyZW1vdmVDbGFzcyIsIiQiLCJjbGljayIsImUiLCIkdGhpcyIsImN1cnJlbnRUYXJnZXQiLCJlbGVtQ29udGFpbmVyIiwiaGFzQ2xhc3MiLCJtZXN1cmVXaWR0aCIsInJlcUl0ZW1XaWR0aCIsInNjcmVlbldpZHRoIiwid2luZG93Iiwid2lkdGgiLCJidXR0b25zQmxvY2tzIiwidGl0bGVzV2lkdGgiLCJsZW5ndGgiLCJ0ZXh0Q29udGFpbmVyIiwicGFkZGluZ0xlZnQiLCJwYXJzZUludCIsImNzcyIsInBhZGRpbmdSaWdodCIsImlzTW9iaWxlIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJjbG9zZUV2ZXJ5SXRlbUluQ29udGFpbmVyIiwiY29udGVudCIsIm9wZW5JdGVtQ29sb3JzIiwiaGlkZGVuQ29udGVudCIsInJlcVdpZHRoIiwib24iLCJwcmV2ZW50RGVmYXVsdCIsIml0ZW1PcGVuZWQiLCJnZWFyT25lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2VhclR3byIsImdlYXJSb3RhdGlvbk9uZSIsImdlYXJSb3RhdGlvblR3byIsImdlYXJEcm9wZG93bk9uZSIsImdlYXJEcm9wZG93blR3byIsImNsaWNrR2VhciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW1idXJnZXIiLCJvdmVybGF5IiwiYm9keSIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhY3RpdmVNZW51IiwibXlNYXAiLCJpbml0IiwieW1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiY29udHJvbHMiLCJjb29yZHMiLCJteUNvbGxlY3Rpb24iLCJHZW9PYmplY3RDb2xsZWN0aW9uIiwiZHJhZ2dhYmxlIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0IiwiY29vcmQiLCJhZGQiLCJQbGFjZW1hcmsiLCJnZW9PYmplY3RzIiwiYmVoYXZpb3JzIiwiZGlzYWJsZSIsInJlYWR5IiwidmFsaWRhdGVGaWVsZHMiLCJmb3JtIiwiZmllbGRzQXJyYXkiLCJmaWVsZWQiLCJ2YWwiLCJ0cmltIiwiZXJyb3JGaWVsZHMiLCJzdWJtaXQiLCJuYW1lIiwicGhvbmUiLCJjb21tZW50IiwidG8iLCJtb2RhbCIsImlzVmFsaWQiLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZGF0YSIsInN1Y2Nlc3MiLCJ0ZXh0IiwibWVzc2FnZSIsInJlc2V0IiwiZmFuY3lib3giLCJvcGVuIiwic3JjIiwidHlwZSIsImVycm9yIiwiY2xvc2UiLCJzZWN0aW9ucyIsImRpc3BsYXkiLCJzaWRlTWVudSIsIm1lbnVJdGVtcyIsIm1vYmlsZURldGVjdCIsIk1vYmlsZURldGVjdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1vYmlsZSIsImluU2Nyb2xsIiwiZmlyc3QiLCJjb3VudFNlY3Rpb25Qb3NpdGlvbiIsInNlY3Rpb25FcSIsInBvc2l0aW9uIiwiaXNOYU4iLCJjb25zb2xlIiwiY2hhbmdlTWVudVRoZW1lRm9yU2VjdGlvbiIsImN1cnJlbnRTZWN0aW9uIiwiZXEiLCJtZW51VGhlbWUiLCJhdHRyIiwiYWN0aXZlQ2xhc3MiLCJyZXNldEFjdGl2ZUNsYXNzRm9ySXRlbSIsIml0ZW1FcSIsInNpYmxpbmdzIiwicGVyZm9tVHJhbnNpdGlvbiIsInRyYW5zaXRpb25PdmVyIiwibW91c2VJbmVydGlhT3ZlciIsInRyYW5zZm9ybSIsImNvbmNhdCIsInNldFRpbWVvdXQiLCJ2aWV3cG9ydFNjcm9sbGVyIiwiYWN0aXZlU2VjdGlvbiIsImZpbHRlciIsIm5leHRTZWN0aW9uIiwibmV4dCIsInByZXZTZWN0aW9uIiwicHJldiIsImluZGV4IiwiZGVsdGFZIiwib3JpZ2luYWxFdmVudCIsInNjcm9sbGVyIiwidGFnTmFtZSIsInRhcmdldCIsInRvTG93ZXJDYXNlIiwidXNlclR5cGluZ0luSW5wdXRzIiwia2V5Q29kZSIsInJlcVNlY3Rpb24iLCJzd2lwZSIsImV2ZW50IiwiZGlyZWN0aW9uIiwic2Nyb2xsRGlyZWN0aW9uIiwicGxheWVyIiwicGxheWVyQ29udGFpbmVyIiwibXV0ZUNvbnRyb2xlciIsImV2ZW50c2luaXQiLCJwYXVzZVZpZGVvIiwicGxheVZpZGVvIiwibXV0ZSIsInVuTXV0ZSIsImJhciIsImNsaWNrZWRQb3NpdGlvbiIsImxheWVyWCIsIm5ld0J1dHRvblBvc2l0aW9uUGVyY2VudCIsIm5ld1BsYXliYWNrUG9zaXRpb25TZWMiLCJnZXREdXJhdGlvbiIsImxlZnQiLCJzZWVrVG8iLCJ2YWx1bWUiLCJjbGlja2VkUG9zaXRpb25WYWx1bWUiLCJidXR0b25Qb3NpdGlvblZhbHVtZSIsInNldFZvbHVtZSIsImxvZyIsIm9uUGxheWVyUmVhZHkiLCJpbnRlcnZhbCIsImR1cmF0aW5TZWMiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjb21wbGV0ZWRTZWMiLCJnZXRDdXJyZW50VGltZSIsImNvbXBsZXRlZFBlcmNlbnQiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwib25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkiLCJZVCIsIlBsYXllciIsInZpZGVvSWQiLCJldmVudHMiLCJwbGF5ZXJWYXJzIiwiZGlzYWJsZWtiIiwic2hvd2luZm8iLCJyZWwiLCJhdXRvcGxheSIsIm1vZGVzdGJyYW5kaW5nIiwiZmluZEJsb2NrQnlBbGlhcyIsImFsaWFzIiwibmR4IiwiaXRlbVRvU2hvdyIsImN1ckl0ZW0iLCJzbGlkZXMiLCJhcnJvdyIsImN1cnJlbnROZHgiLCJzbGlkZXIiLCJjb250YWlucyIsInRhcmdldFZhbHVlIiwiZGF0YXNldCIsImJ1dHRvbiIsImNoaWxkcmVuIiwiZG9UcmFuc2l0aW9uIiwic3R5bGUiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsUUFBQSxHQUFBLFNBQUFBLFFBQUFBLENBQUFDLElBQUEsRUFBQTtFQUNBLElBQUFDLFNBQUEsR0FBQUQsSUFBQSxDQUFBRSxPQUFBLENBQUEsYUFBQSxDQUFBO0VBQ0EsSUFBQUMsWUFBQSxHQUFBRixTQUFBLENBQUFHLElBQUEsQ0FBQSxnQkFBQSxDQUFBO0VBQ0EsSUFBQUMsU0FBQSxHQUFBRixZQUFBLENBQUFDLElBQUEsQ0FBQSxzQkFBQSxDQUFBO0VBQ0EsSUFBQUUsU0FBQSxHQUFBRCxTQUFBLENBQUFFLE1BQUEsQ0FBQSxDQUFBO0VBRUFOLFNBQUEsQ0FBQU8sUUFBQSxDQUFBLFFBQUEsQ0FBQTtFQUNBTCxZQUFBLENBQUFJLE1BQUEsQ0FBQUQsU0FBQSxDQUFBO0FBQ0EsQ0FBQTtBQUVBLElBQUFHLGNBQUEsR0FBQSxTQUFBQSxjQUFBQSxDQUFBUixTQUFBLEVBQUE7RUFDQSxJQUFBUyxLQUFBLEdBQUFULFNBQUEsQ0FBQUcsSUFBQSxDQUFBLGdCQUFBLENBQUE7RUFDQSxJQUFBTyxhQUFBLEdBQUFWLFNBQUEsQ0FBQUcsSUFBQSxDQUFBLGFBQUEsQ0FBQTtFQUVBTyxhQUFBLENBQUFDLFdBQUEsQ0FBQSxRQUFBLENBQUE7RUFDQUYsS0FBQSxDQUFBSCxNQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsQ0FBQTtBQUVBTSxDQUFBLENBQUEsYUFBQSxDQUFBLENBQUFDLEtBQUEsQ0FBQSxVQUFBQyxDQUFBLEVBQUE7RUFDQSxJQUFBQyxLQUFBLEdBQUFILENBQUEsQ0FBQUUsQ0FBQSxDQUFBRSxhQUFBLENBQUE7RUFDQSxJQUFBaEIsU0FBQSxHQUFBZSxLQUFBLENBQUFkLE9BQUEsQ0FBQSxPQUFBLENBQUE7RUFDQSxJQUFB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QUFBO0lBQ0EsSUFBQUMsV0FBQSxHQUFBNUQsTUFBQSxDQUFBNkQsT0FBQSxDQUFBQyxNQUFBO0lBRUEsSUFBQUYsV0FBQSxLQUFBLE9BQUEsRUFBQTtNQUNBLElBQUFILFVBQUEsR0FBQUYsTUFBQSxDQUFBUSxRQUFBLENBQUFoTSxNQUFBLEdBQUEsQ0FBQSxFQUFBO1FBQ0EwTCxVQUFBLElBQUEsQ0FBQTtRQUNBTyxZQUFBLENBQUFQLFVBQUEsQ0FBQTtNQUNBLENBQUEsTUFBQTtJQUNBO0lBRUEsSUFBQUcsV0FBQSxLQUFBLE1BQUEsRUFBQTtNQUNBLElBQUFILFVBQUEsR0FBQSxDQUFBLEVBQUE7UUFDQUEsVUFBQSxJQUFBLENBQUE7UUFDQU8sWUFBQSxDQUFBUCxVQUFBLENBQUE7TUFDQSxDQUFBLE1BQUE7SUFDQTtFQUNBO0FBQ0EsQ0FBQTtBQUVBLFNBQUFPLFlBQUFBLENBQUFyRSxLQUFBLEVBQUE7RUFDQTRELE1BQUEsQ0FBQVUsS0FBQSxDQUFBaEYsU0FBQSxrQkFBQUMsTUFBQSxDQUFBUyxLQUFBLEdBQUEsR0FBQSxPQUFBO0FBQ0E7QUFFQTZELEtBQUEsQ0FBQTdKLGdCQUFBLENBQUEsT0FBQSxFQUFBK0osTUFBQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBvcGVuSXRlbSA9IGl0ZW0gPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGl0ZW0uY2xvc2VzdCgnLnRlYW1fX2l0ZW0nKTtcclxuICBjb25zdCBjb250ZW50QmxvY2sgPSBjb250YWluZXIuZmluZCgnLnRlYW1fX2NvbnRlbnQnKTtcclxuICBjb25zdCB0ZXh0QmxvY2sgPSBjb250ZW50QmxvY2suZmluZCgnLnRlYW1fX2NvbnRlbnQtYmxvY2snKTtcclxuICBjb25zdCByZXFIZWlnaHQgPSB0ZXh0QmxvY2suaGVpZ2h0KCk7XHJcblxyXG4gIGNvbnRhaW5lci5hZGRDbGFzcygnYWN0aXZlJylcclxuICBjb250ZW50QmxvY2suaGVpZ2h0KHJlcUhlaWdodCk7XHJcbn1cclxuXHJcbmNvbnN0IGNsb3NlRXZlcnlJdGVtID0gY29udGFpbmVyID0+IHtcclxuICBjb25zdCBpdGVtcyA9IGNvbnRhaW5lci5maW5kKCcudGVhbV9fY29udGVudCcpO1xyXG4gIGNvbnN0IGl0ZW1Db250aWFuZXIgPSBjb250YWluZXIuZmluZCgnLnRlYW1fX2l0ZW0nKTtcclxuXHJcbiAgaXRlbUNvbnRpYW5lci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgaXRlbXMuaGVpZ2h0KDApXHJcbn1cclxuXHJcbiQoJy50ZWFtX19uYW1lJykuY2xpY2soZSA9PiB7XHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgY29udGFpbmVyID0gJHRoaXMuY2xvc2VzdCgnLnRlYW0nKTtcclxuICBjb25zdCBlbGVtQ29udGFpbmVyID0gJHRoaXMuY2xvc2VzdCgnLnRlYW1fX2l0ZW0nKTtcclxuICBcclxuICBpZiAoZWxlbUNvbnRhaW5lci5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgIGNsb3NlRXZlcnlJdGVtKGNvbnRhaW5lcik7XHJcbiAgfSBlbHNlIHtcclxuICBjbG9zZUV2ZXJ5SXRlbShjb250YWluZXIpO1xyXG4gIG9wZW5JdGVtKCR0aGlzKTtcclxuICB9XHJcbn0pIiwiY29uc3QgbWVzdXJlV2lkdGggPSAoaXRlbSkgPT4ge1xyXG5cclxuICBsZXQgcmVxSXRlbVdpZHRoID0gMDtcclxuXHJcbiAgY29uc3Qgc2NyZWVuV2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICBjb25zdCBjb250YWluZXIgPSBpdGVtLmNsb3Nlc3QoJy5jb2xvcnMtbWVudScpO1xyXG4gIGNvbnN0IGJ1dHRvbnNCbG9ja3MgPSBjb250YWluZXIuZmluZCgnLmNvbG9ycy1tZW51X19idXR0b24nKTtcclxuICBjb25zdCB0aXRsZXNXaWR0aCA9IGJ1dHRvbnNCbG9ja3Mud2lkdGgoKSAqIGJ1dHRvbnNCbG9ja3MubGVuZ3RoO1xyXG4gIFxyXG4gIGNvbnN0IHRleHRDb250YWluZXIgPSBpdGVtLmZpbmQoJy5jb2xvcnMtbWVudV9fY29udGFpbmVyJyk7XHJcbiAgY29uc3QgcGFkZGluZ0xlZnQgPSBwYXJzZUludCh0ZXh0Q29udGFpbmVyLmNzcygncGFkZGluZy1sZWZ0JykpO1xyXG4gIGNvbnN0IHBhZGRpbmdSaWdodCA9IHBhcnNlSW50KHRleHRDb250YWluZXIuY3NzKCdwYWRkaW5nLXJpZ2h0JykpO1xyXG5cclxuICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA3NjhweCknKS5tYXRjaGVzO1xyXG4gIFxyXG4gIGlmIChpc01vYmlsZSkge1xyXG4gICAgcmVxSXRlbVdpZHRoID0gc2NyZWVuV2lkdGggLSB0aXRsZXNXaWR0aDtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVxSXRlbVdpZHRoID0gNTAwO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGNvbnRhaW5lcjogcmVxSXRlbVdpZHRoLFxyXG4gICAgdGV4dENvbnRhaW5lcjogcmVxSXRlbVdpZHRoIC0gcGFkZGluZ0xlZnQgLSBwYWRkaW5nUmlnaHRcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZUV2ZXJ5SXRlbUluQ29udGFpbmVyID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gIGNvbnN0IGl0ZW0gPSBjb250YWluZXIuZmluZCgnLmNvbG9ycy1tZW51X19pdGVtJyk7XHJcbiAgY29uc3QgY29udGVudCA9IGNvbnRhaW5lci5maW5kKCcuY29sb3JzLW1lbnVfX2NvbnRlbnQnKTtcclxuXHJcbiAgaXRlbS5yZW1vdmVDbGFzcygnYWN0aXZlLWNvbG9ycycpO1xyXG4gIGNvbnRlbnQud2lkdGgoMCk7XHJcbn07XHJcblxyXG5jb25zdCBvcGVuSXRlbUNvbG9ycyA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgaGlkZGVuQ29udGVudCA9IGl0ZW0uZmluZCgnLmNvbG9ycy1tZW51X19jb250ZW50Jyk7XHJcbiAgY29uc3QgcmVxV2lkdGggPSBtZXN1cmVXaWR0aChpdGVtKTtcclxuICBjb25zdCB0ZXh0QmxvY2sgPSBpdGVtLmZpbmQoJy5jb2xvcnMtbWVudV9fY29udGFpbmVyJyk7XHJcblxyXG4gIGl0ZW0uYWRkQ2xhc3MoJ2FjdGl2ZS1jb2xvcnMnKTtcclxuICBoaWRkZW5Db250ZW50LndpZHRoKHJlcVdpZHRoLmNvbnRhaW5lcik7XHJcbiAgdGV4dEJsb2NrLndpZHRoKHJlcVdpZHRoLnRleHRDb250YWluZXIpO1xyXG59O1xyXG5cclxuJCgnLmNvbG9ycy1tZW51X19idXR0b24nKS5vbignY2xpY2snLCAoZSkgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgaXRlbSA9ICR0aGlzLmNsb3Nlc3QoJy5jb2xvcnMtbWVudV9faXRlbScpO1xyXG4gIGNvbnN0IGl0ZW1PcGVuZWQgPSBpdGVtLmhhc0NsYXNzKCdhY3RpdmUtY29sb3JzJyk7XHJcbiAgY29uc3QgY29udGFpbmVyID0gJHRoaXMuY2xvc2VzdCgnLmNvbG9ycy1tZW51Jyk7XHJcblxyXG4gIGlmIChpdGVtT3BlbmVkKSB7XHJcbiAgICBjbG9zZUV2ZXJ5SXRlbUluQ29udGFpbmVyKGNvbnRhaW5lcilcclxuICB9IGVsc2Uge1xyXG4gICAgY2xvc2VFdmVyeUl0ZW1JbkNvbnRhaW5lcihjb250YWluZXIpO1xyXG4gICAgb3Blbkl0ZW1Db2xvcnMoaXRlbSk7XHJcbiAgfVxyXG59KTtcclxuIiwibGV0IGdlYXJPbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2Vhcl9fYnV0dG9uLW9uZScpO1xyXG5sZXQgZ2VhclR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZWFyX19idXR0b24tdHdvJyk7XHJcbmxldCBnZWFyUm90YXRpb25PbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2Vhci1pbWFnZS1vbmUnKTtcclxubGV0IGdlYXJSb3RhdGlvblR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnZWFyLWltYWdlLXR3bycpO1xyXG5sZXQgZ2VhckRyb3Bkb3duT25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlYXJfX2Ryb3Bkb3duLW9uZScpO1xyXG5sZXQgZ2VhckRyb3Bkb3duVHdvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlYXJfX2Ryb3Bkb3duLXR3bycpO1xyXG5cclxuZnVuY3Rpb24gY2xpY2tHZWFyKCkge1xyXG4gIGdlYXJSb3RhdGlvbk9uZS5jbGFzc0xpc3QudG9nZ2xlKCdnZWFyLWltYWdlLS1yb3RhdGlvbicpO1xyXG4gIGdlYXJSb3RhdGlvblR3by5jbGFzc0xpc3QudG9nZ2xlKCdnZWFyLWltYWdlLS1yb3RhdGlvbicpO1xyXG4gIGdlYXJEcm9wZG93bk9uZS5jbGFzc0xpc3QudG9nZ2xlKCdnZWFyX19kcm9wZG93bi0tYWN0aXZlJyk7XHJcbiAgZ2VhckRyb3Bkb3duVHdvLmNsYXNzTGlzdC50b2dnbGUoJ2dlYXJfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcclxufVxyXG5cclxuZ2Vhck9uZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrR2Vhcik7XHJcbmdlYXJUd28uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0dlYXIpO1xyXG5cclxuIiwibGV0IGhhbWJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoYW1idXJnZXInKTtcclxubGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheScpO1xyXG5sZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHJcblxyXG5sZXQgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3ZlcmxheS1tZW51X19saW5rJylcclxuXHJcbmxpbmtzLmZvckVhY2goZnVuY3Rpb24oZSkge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3RpdmVNZW51KTtcclxufSlcclxuXHJcbmZ1bmN0aW9uIGFjdGl2ZU1lbnUoKSB7XHJcbiAgaGFtYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoJ2hhbWJ1cmdlci0tYWN0aXZlJyk7XHJcbiAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKCdvdmVybGF5LS1hY3RpdmUnKTtcclxuICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2JvZHktLWFjdGl2ZS1tZW51Jyk7XHJcbn1cclxuXHJcbmhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFjdGl2ZU1lbnUpO1xyXG5cclxuIiwibGV0IG15TWFwO1xyXG4gXHJcbmNvbnN0IGluaXQgPSAoKSA9PiB7XHJcbiBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICBjZW50ZXI6IFs1NS43NTU0NjEsIDM3LjYxOTIyOF0sXHJcbiAgIHpvb206IDE0LFxyXG4gICBjb250cm9sczogW11cclxuIH0pO1xyXG5cclxuIGNvbnN0IGNvb3JkcyA9IFtcclxuICBbNTUuNzU4NDAzLCAzNy41ODM1NjFdLFxyXG4gIFs1NS43NTY0NTIsIDM3LjYyMDU3NF0sXHJcbiAgWzU1Ljc1MDIwMSwgMzcuNjAzNjAyXSxcclxuICBbNTUuNzQzOTM3LCAzNy41ODEwNDFdXHJcbiBdO1xyXG5cclxuIGNvbnN0IG15Q29sbGVjdGlvbiA9IG5ldyB5bWFwcy5HZW9PYmplY3RDb2xsZWN0aW9uKHt9LCB7XHJcbiAgZHJhZ2dhYmxlOiBmYWxzZSwgXHJcbiAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gIGljb25JbWFnZUhyZWY6ICdJTUcvbWFya2VyLnN2ZycsXHJcbiAgaWNvbkltYWdlU2l6ZTogWzMwLCA0Ml0sXHJcbiAgaWNvbkltYWdlT2Zmc2V0OiBbLTMsIC00Ml1cclxuIH0pO1xyXG5cclxuIGNvb3Jkcy5mb3JFYWNoKGNvb3JkID0+IHtcclxuICBteUNvbGxlY3Rpb24uYWRkKG5ldyB5bWFwcy5QbGFjZW1hcmsoY29vcmQpKTtcclxuIH0pO1xyXG5cclxuIG15TWFwLmdlb09iamVjdHMuYWRkKG15Q29sbGVjdGlvbik7XHJcblxyXG4gbXlNYXAuYmVoYXZpb3JzLmRpc2FibGUoJ3Njcm9sbFpvb20nKTtcclxufVxyXG4gXHJcbnltYXBzLnJlYWR5KGluaXQpOyIsImNvbnN0IHZhbGlkYXRlRmllbGRzID0gKGZvcm0sIGZpZWxkc0FycmF5KSA9PiB7XHJcbiAgZmllbGRzQXJyYXkuZm9yRWFjaChmaWVsZWQgPT4ge1xyXG4gICAgZmllbGVkLnJlbW92ZUNsYXNzKFwiaW5wdXQtZXJyb3JcIik7XHJcbiAgICBpZiAoZmllbGVkLnZhbCgpLnRyaW0oKSA9PSBcIlwiKSB7XHJcbiAgICAgIGZpZWxlZC5hZGRDbGFzcyhcImlucHV0LWVycm9yXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBlcnJvckZpZWxkcyA9IGZvcm0uZmluZChcIi5pbnB1dC1lcnJvclwiKTtcclxuXHJcbiAgcmV0dXJuIGVycm9yRmllbGRzLmxlbmd0aCA9PSAwO1xyXG59XHJcblxyXG4kKCcuZm9ybScpLnN1Ym1pdChlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IGZvcm0gPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgbmFtZSA9IGZvcm0uZmluZChcIltuYW1lPSduYW1lJ11cIik7XHJcbiAgY29uc3QgcGhvbmUgPSBmb3JtLmZpbmQoXCJbbmFtZT0ncGhvbmUnXVwiKTtcclxuICBjb25zdCBjb21tZW50ID0gZm9ybS5maW5kKFwiW25hbWU9J2NvbW1lbnQnXVwiKTtcclxuICBjb25zdCB0byA9IGZvcm0uZmluZChcIltuYW1lPSd0byddXCIpO1xyXG5cclxuICBjb25zdCBtb2RhbCA9ICQoXCIjbW9kYWxcIik7XHJcbiAgY29uc3QgY29udGVudCA9IG1vZGFsLmZpbmQoJy5tb2RhbF9fY29udGVudCcpO1xyXG5cclxuICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdGVGaWVsZHMoZm9ybSwgW25hbWUsIHBob25lLCBjb21tZW50LCB0b10pO1xyXG5cclxuICBpZiAoaXNWYWxpZCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgbmFtZTogbmFtZS52YWwoKSxcclxuICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXHJcbiAgICAgICAgY29tbWVudDogY29tbWVudC52YWwoKSxcclxuICAgICAgICB0bzogdG8udmFsKCksXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29udGVudC50ZXh0KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgJCgnLmZvcm0nKVswXS5yZXNldCgpO1xyXG4gICAgICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICB0eXBlOiBcImlubGluZVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBlcnJvcjogKGRhdGEpID0+IHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgY29udGVudC50ZXh0KFwi0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwXCIpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiaW5saW5lXCIsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuJChcIi5hcHAtc3VibWl0LWJ1dHRvblwiKS5jbGljaygoZSkgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgJC5mYW5jeWJveC5jbG9zZSgpO1xyXG59KTsiLCJjb25zdCBzZWN0aW9ucyA9ICQoJ3NlY3Rpb24nKTtcclxuY29uc3QgZGlzcGxheSA9ICQoJy5tYWluY29udGVudCcpO1xyXG5jb25zdCBzaWRlTWVudSA9ICQoJy5maXhlZC1tZW51Jyk7XHJcbmNvbnN0IG1lbnVJdGVtcyA9IHNpZGVNZW51LmZpbmQoJy5maXhlZC1tZW51X19pdGVtJylcclxuXHJcbmNvbnN0IG1vYmlsZURldGVjdCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5jb25zdCBpc01vYmlsZSA9IG1vYmlsZURldGVjdC5tb2JpbGUoKTtcclxuXHJcbmxldCBpblNjcm9sbCA9IGZhbHNlO1xyXG5cclxuc2VjdGlvbnMuZmlyc3QoKS5hZGRDbGFzcygndGhpcy1zZWN0aW9uJyk7XHJcblxyXG5jb25zdCBjb3VudFNlY3Rpb25Qb3NpdGlvbiA9IHNlY3Rpb25FcSA9PiB7XHJcbiAgY29uc3QgcG9zaXRpb24gPSBzZWN0aW9uRXEgKiAtMTAwXHJcblxyXG4gIGlmIChpc05hTihwb3NpdGlvbikpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ9C/0LXRgNC10LTQsNC90L4g0L3QtSDQstC10YDQvdC+0LUg0LfQvdCw0YfQtdC90LjQtSDQsiBjb3VudFNlY3Rpb25Qb3NpdGlvbicpO1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcG9zaXRpb247XHJcbn1cclxuXHJcbmNvbnN0IGNoYW5nZU1lbnVUaGVtZUZvclNlY3Rpb24gPSBzZWN0aW9uRXEgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbnMuZXEoc2VjdGlvbkVxKTtcclxuICBjb25zdCBtZW51VGhlbWUgPWN1cnJlbnRTZWN0aW9uLmF0dHIoJ2RhdGEtdGhlbWUnKTtcclxuICBjb25zdCBhY3RpdmVDbGFzcyA9ICdmaXhlZC1tZW51LS13aGl0ZSc7XHJcbiAgXHJcblxyXG4gIGlmIChtZW51VGhlbWUgPT0gJ3doaXRlJykge1xyXG4gICAgc2lkZU1lbnUuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzaWRlTWVudS5yZW1vdmVDbGFzcygnZml4ZWQtbWVudS0td2hpdGUnKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZXNldEFjdGl2ZUNsYXNzRm9ySXRlbSA9IChpdGVtLCBpdGVtRXEsIGFjdGl2ZUNsYXNzKSA9PiB7XHJcbiAgaXRlbS5lcShpdGVtRXEpLmFkZENsYXNzKGFjdGl2ZUNsYXNzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IHBlcmZvbVRyYW5zaXRpb24gPSAoc2VjdGlvbkVxKSA9PiB7XHJcbiAgaWYgKGluU2Nyb2xsKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IHRyYW5zaXRpb25PdmVyID0gMTAwMDtcclxuICBjb25zdCBtb3VzZUluZXJ0aWFPdmVyID0gMzAwO1xyXG5cclxuICBpblNjcm9sbCA9IHRydWU7XHJcblxyXG4gIGNvbnN0IHBvc2l0aW9uID0gY291bnRTZWN0aW9uUG9zaXRpb24oc2VjdGlvbkVxKTtcclxuXHJcbiAgY2hhbmdlTWVudVRoZW1lRm9yU2VjdGlvbihzZWN0aW9uRXEpO1xyXG5cclxuICBkaXNwbGF5LmNzcyh7XHJcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7cG9zaXRpb259JSlgXHJcbiAgfSk7XHJcblxyXG4gIHJlc2V0QWN0aXZlQ2xhc3NGb3JJdGVtKHNlY3Rpb25zLCBzZWN0aW9uRXEsICd0aGlzLXNlY3Rpb24nKVxyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGluU2Nyb2xsID0gZmFsc2U7XHJcblxyXG4gICAgcmVzZXRBY3RpdmVDbGFzc0Zvckl0ZW0obWVudUl0ZW1zLCBzZWN0aW9uRXEsICdmaXhlZC1tZW51X19pdGVtLS1hY3RpdmUnKVxyXG4gIH0sIHRyYW5zaXRpb25PdmVyICsgbW91c2VJbmVydGlhT3Zlcik7XHJcbn07XHJcblxyXG5jb25zdCB2aWV3cG9ydFNjcm9sbGVyID0gKCkgPT4ge1xyXG4gIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBzZWN0aW9ucy5maWx0ZXIoJy50aGlzLXNlY3Rpb24nKTtcclxuICBjb25zdCBuZXh0U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ubmV4dCgpO1xyXG4gIGNvbnN0IHByZXZTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5wcmV2KCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBuZXh0KCkge1xyXG4gICAgICBpZiAobmV4dFNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgcGVyZm9tVHJhbnNpdGlvbihuZXh0U2VjdGlvbi5pbmRleCgpKVxyXG4gICAgIH1cclxuICAgIH0sXHJcbiAgICBwcmV2KCkge1xyXG4gICAgICBpZiAocHJldlNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgcGVyZm9tVHJhbnNpdGlvbihwcmV2U2VjdGlvbi5pbmRleCgpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9O1xyXG59O1xyXG5cclxuJCh3aW5kb3cpLm9uKCd3aGVlbCcsIGU9PiB7XHJcbiAgY29uc3QgZGVsdGFZID0gZS5vcmlnaW5hbEV2ZW50LmRlbHRhWTtcclxuICBjb25zdCBzY3JvbGxlciA9IHZpZXdwb3J0U2Nyb2xsZXIoKTtcclxuXHJcbiAgaWYgKGRlbHRhWSA+IDApIHtcclxuICAgIHNjcm9sbGVyLm5leHQoKTtcclxuICB9XHJcblxyXG4gIGlmIChkZWx0YVkgPCAwKSB7XHJcbiAgICBzY3JvbGxlci5wcmV2KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbiQod2luZG93KS5vbigna2V5ZG93bicsIGUgPT4ge1xyXG4gIGNvbnN0IHRhZ05hbWUgPSBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgY29uc3QgdXNlclR5cGluZ0luSW5wdXRzID0gdGFnTmFtZSA9PSAnaW5wdXQnIHx8IHRhZ05hbWUgPT0gJ3RleHRhcmVhJztcclxuICBjb25zdCBzY3JvbGxlciA9IHZpZXdwb3J0U2Nyb2xsZXIoKTtcclxuICBcclxuICBpZih1c2VyVHlwaW5nSW5JbnB1dHMpIHJldHVybjtcclxuXHJcbiAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICBjYXNlIDM4OlxyXG4gICAgICAgIHNjcm9sbGVyLnByZXYoKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgc2Nyb2xsZXIubmV4dCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiQoJy53cmFwcGVyJykub24oJ3RvdWNobW92ZScsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuXHJcbiQoJ1tkYXRhLXNjcm9sbC10bycpLmNsaWNrKGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1zY3JvbGwtdG8nKTtcclxuICBjb25zdCByZXFTZWN0aW9uID0gJChgW2RhdGEtc2VjdGlvbj0ke3RhcmdldH1dYCk7XHJcblxyXG4gIHBlcmZvbVRyYW5zaXRpb24ocmVxU2VjdGlvbi5pbmRleCgpKTtcclxufSk7XHJcblxyXG5pZiAoaXNNb2JpbGUpIHtcclxuICAgICAgJChcImJvZHlcIikuc3dpcGUoe1xyXG4gICAgICBzd2lwZTogZnVuY3Rpb24gKGV2ZW50LCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBzY3JvbGxlciA9IHZpZXdwb3J0U2Nyb2xsZXIoKTtcclxuICAgICAgICBsZXQgc2Nyb2xsRGlyZWN0aW9uID0gXCJcIjtcclxuICBcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09ICd1cCcpIHNjcm9sbERpcmVjdGlvbiA9ICduZXh0JztcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09ICdkb3duJykgc2Nyb2xsRGlyZWN0aW9uID0gJ3ByZXYnO1xyXG4gIFxyXG4gICAgICAgIHNjcm9sbGVyW3Njcm9sbERpcmVjdGlvbl0oKTtcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuIiwibGV0IHBsYXllcjtcclxuY29uc3QgcGxheWVyQ29udGFpbmVyID0gJCgnLnBsYXllcicpO1xyXG5jb25zdCBtdXRlQ29udHJvbGVyID0gJCgnLnBsYXllcl9fc291bmQnKVxyXG5cclxubGV0IGV2ZW50c2luaXQgPSAoKSA9PiB7XHJcbiAgJCgnLnBsYXllcl9fZHVyYXRpb24tcGxheSwgLnBsYXllcl9fZHVyYXRpb24tcGF1c2UnKS5jbGljayhlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAocGxheWVyQ29udGFpbmVyLmhhc0NsYXNzKCdwbGF5ZXItLXBhdXNlZCcpKSB7XHJcbiAgICAgIHBsYXllci5wYXVzZVZpZGVvKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5wbGF5ZXJfX3NvdW5kLW9mZiwgLnBsYXllcl9fc291bmQtb24nKS5jbGljayhlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAobXV0ZUNvbnRyb2xlci5oYXNDbGFzcygncGxheWVyX19zb3VuZC0tbm8tbXV0ZScpKSB7XHJcbiAgICAgIG11dGVDb250cm9sZXIucmVtb3ZlQ2xhc3MoJ3BsYXllcl9fc291bmQtLW5vLW11dGUnKTtcclxuICAgICAgcGxheWVyLm11dGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG11dGVDb250cm9sZXIuYWRkQ2xhc3MoJ3BsYXllcl9fc291bmQtLW5vLW11dGUnKTtcclxuICAgICAgcGxheWVyLnVuTXV0ZSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcucGxheWVyX19wbGF5YmFjaycpLmNsaWNrKGUgPT4ge1xyXG4gICAgY29uc3QgYmFyID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3QgY2xpY2tlZFBvc2l0aW9uID0gZS5vcmlnaW5hbEV2ZW50LmxheWVyWDtcclxuICAgIGNvbnN0IG5ld0J1dHRvblBvc2l0aW9uUGVyY2VudCA9IChjbGlja2VkUG9zaXRpb24gLyBiYXIud2lkdGgoKSkgKiAxMDA7XHJcbiAgICBjb25zdCBuZXdQbGF5YmFja1Bvc2l0aW9uU2VjID0gXHJcbiAgICAgIChwbGF5ZXIuZ2V0RHVyYXRpb24oKSAvIDEwMCkgKiBuZXdCdXR0b25Qb3NpdGlvblBlcmNlbnQ7XHJcblxyXG4gICAgJCgnLnBsYXllcl9fYnV0dG9uLXBsYXliYWNrJykuY3NzICh7XHJcbiAgICAgIGxlZnQ6IGAke25ld0J1dHRvblBvc2l0aW9uUGVyY2VudH0lYFxyXG4gICAgfSk7XHJcblxyXG4gICAgcGxheWVyLnNlZWtUbyhuZXdQbGF5YmFja1Bvc2l0aW9uU2VjKTtcclxuICB9KTtcclxuXHJcbiAgJCgnLnBsYXllcl9fc3BsYXNoLCAucGxheWVyX19wbGF5LWltYWdlJykuY2xpY2soZSA9PiB7XHJcbiAgICBwbGF5ZXIucGxheVZpZGVvKCk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5wbGF5ZXJfX3ZhbHVtZScpLmNsaWNrKGUgPT4ge1xyXG4gICAgY29uc3QgdmFsdW1lID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3QgY2xpY2tlZFBvc2l0aW9uVmFsdW1lID0gZS5vcmlnaW5hbEV2ZW50LmxheWVyWDtcclxuICAgIGNvbnN0IGJ1dHRvblBvc2l0aW9uVmFsdW1lID0gKGNsaWNrZWRQb3NpdGlvblZhbHVtZSAvIHZhbHVtZS53aWR0aCgpKSAqIDEwMDtcclxuICAgICAgXHJcbiAgICAkKCcucGxheWVyX19idXR0b24tdmFsdW1lJykuY3NzICh7XHJcbiAgICAgIGxlZnQ6IGAke2J1dHRvblBvc2l0aW9uVmFsdW1lfSVgXHJcbiAgICB9KTtcclxuXHJcbiAgICBwbGF5ZXIuc2V0Vm9sdW1lKGJ1dHRvblBvc2l0aW9uVmFsdW1lKTtcclxuICAgIGNvbnNvbGUubG9nKGJ1dHRvblBvc2l0aW9uVmFsdW1lKVxyXG4gIH0pXHJcbn07XHJcblxyXG5jb25zdCBvblBsYXllclJlYWR5ID0gKCkgPT4ge1xyXG4gIGxldCBpbnRlcnZhbDtcclxuICBjb25zdCBkdXJhdGluU2VjID0gcGxheWVyLmdldER1cmF0aW9uKCk7XHJcblxyXG4gIGlmICh0eXBlb2YgaW50ZXJ2YWwgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gIH1cclxuXHJcbiAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICBjb25zdCBjb21wbGV0ZWRTZWMgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgIGNvbnN0IGNvbXBsZXRlZFBlcmNlbnQgPSAoY29tcGxldGVkU2VjIC8gZHVyYXRpblNlYykgKiAxMDA7XHJcblxyXG4gICAgJCgnLnBsYXllcl9fYnV0dG9uLXBsYXliYWNrJykuY3NzKHtcclxuICAgICAgbGVmdDogYCR7Y29tcGxldGVkUGVyY2VudH0lYFxyXG4gICAgfSk7XHJcbiAgfSwgMTAwMCk7XHJcbn07XHJcblxyXG5jb25zdCBvblBsYXllclN0YXRlQ2hhbmdlID0gZXZlbnQgPT4ge1xyXG4gIHN3aXRjaCAoZXZlbnQuZGF0YSkge1xyXG4gICAgY2FzZSAxOlxyXG4gICAgICBwbGF5ZXJDb250YWluZXIuYWRkQ2xhc3MoJ3BsYXllci0tYWN0aXZlJyk7XHJcbiAgICAgIHBsYXllckNvbnRhaW5lci5hZGRDbGFzcygncGxheWVyLS1wYXVzZWQnKTtcclxuICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgICAgcGxheWVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdwbGF5ZXItLWFjdGl2ZScpO1xyXG4gICAgICAgIHBsYXllckNvbnRhaW5lci5yZW1vdmVDbGFzcygncGxheWVyLS1wYXVzZWQnKTtcclxuICAgICAgICBicmVhaztcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpIHtcclxuICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCd5b3V0dWJlLXBsYXllcicsIHtcclxuICAgIGhlaWdodDogJzM5MCcsXHJcbiAgICB3aWR0aDogJzY2MicsXHJcbiAgICB2aWRlb0lkOiAnc0RoX2tGUC1wcGsnLFxyXG4gICAgZXZlbnRzOiB7XHJcbiAgICAgICdvblJlYWR5Jzogb25QbGF5ZXJSZWFkeSxcclxuICAgICAgJ29uU3RhdGVDaGFuZ2UnOiBvblBsYXllclN0YXRlQ2hhbmdlXHJcbiAgICB9LFxyXG4gICAgcGxheWVyVmFyczoge1xyXG4gICAgICBjb250cm9sczogMCxcclxuICAgICAgZGlzYWJsZWtiOiAwLFxyXG4gICAgICBzaG93aW5mbzogMCxcclxuICAgICAgcmVsOiAwLFxyXG4gICAgICBhdXRvcGxheTogMCxcclxuICAgICAgbW9kZXN0YnJhbmRpbmc6IDBcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZXZlbnRzaW5pdCgpO1xyXG4iLCJjb25zdCBmaW5kQmxvY2tCeUFsaWFzID0gYWxpYXMgPT4ge1xyXG4gIHJldHVybiAkKCcucmV2aWV3c19faXRlbScpLmZpbHRlcigobmR4LCBpdGVtKSA9PiB7XHJcbiAgICByZXR1cm4gJChpdGVtKS5hdHRyKCdkYXRhLWxpbmtlZCcpID09IGFsaWFzO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuJCgnLmludGVyYWN0aXZlLWF2YXRhcl9fbGluaycpLmNsaWNrKGUgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1vcGVuJyk7XHJcbiAgY29uc3QgaXRlbVRvU2hvdyA9IGZpbmRCbG9ja0J5QWxpYXModGFyZ2V0KTtcclxuICBjb25zdCBjdXJJdGVtID0gJHRoaXMuY2xvc2VzdCgnLnJldmlld3NfX3N3aXRoZXItaXRlbScpO1xyXG5cclxuICBpdGVtVG9TaG93LmFkZENsYXNzKCdyZXZpZXdzX19pdGVtLS1hY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdyZXZpZXdzX19pdGVtLS1hY3RpdmUnKTtcclxuICBjdXJJdGVtLmFkZENsYXNzKCdpbnRlcmFjdGl2ZS1hdmF0YXItLWFjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2ludGVyYWN0aXZlLWF2YXRhci0tYWN0aXZlJyk7XHJcbn0pOyIsImxldCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19zbGlkZXMnKTtcclxubGV0IGFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fYnV0dG9ucycpO1xyXG5sZXQgY3VycmVudE5keCA9IDA7XHJcblxyXG5jb25zdCBzbGlkZXIgPSAoZXZlbnQpID0+IHtcclxuICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG5cclxuICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyX19idXR0b24nKSkge1xyXG4gICAgbGV0IHRhcmdldFZhbHVlID0gdGFyZ2V0LmRhdGFzZXQuYnV0dG9uO1xyXG5cclxuICAgIGlmICh0YXJnZXRWYWx1ZSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICBpZiAoY3VycmVudE5keCA8IHNsaWRlcy5jaGlsZHJlbi5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgY3VycmVudE5keCArPSAxO1xyXG4gICAgICAgIGRvVHJhbnNpdGlvbihjdXJyZW50TmR4KTtcclxuICAgICAgfSBlbHNlIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHRhcmdldFZhbHVlID09PSAnbGVmdCcpIHtcclxuICAgICAgaWYgKGN1cnJlbnROZHggPiAwKSB7XHJcbiAgICAgICAgY3VycmVudE5keCAtPSAxO1xyXG4gICAgICAgIGRvVHJhbnNpdGlvbihjdXJyZW50TmR4KTtcclxuICAgICAgfSBlbHNlIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBkb1RyYW5zaXRpb24oaW5kZXgpIHtcclxuICBzbGlkZXMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7aW5kZXggKiAxMDB9JSlgO1xyXG59XHJcblxyXG5hcnJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNsaWRlcik7XHJcbiJdfQ==
